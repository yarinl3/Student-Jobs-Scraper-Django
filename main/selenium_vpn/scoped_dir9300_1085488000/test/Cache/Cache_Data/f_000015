!function(e){"use strict";(e.picreel=e.picreel||{}).config=function(){var e=!0,t=!1,r=function(){var e={main:"//app.picreel.com/",s3:"//system.picreel.com/"};return e.sourceUrl=e.main+"api/get_template",e.dataUrl=e.main+"api/send_data",e.sendAnswer="https:"+e.main+"api/get_survey_result",e.libs={jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js",json3:"http://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"},e.styles={survey:e.main+"css/picreel.poll.css",surveyPopup:e.s3+"css/picreel.poll-popup.min.css",helloBar:e.main+"css/picreel.hellobar.css",nanoBar:e.s3+"css/picreel.nanobar.min.css",reminderBar:e.s3+"css/picreel.reminderbar.min.css",tab:e.main+"css/picreel.tab.min.css"},e.messenger=e.s3+"js/cd.min.js",e}();return{getUrls:function(){return r},isLocal:function(){return e},isDebug:function(){return t}}}()}(window),function(e,t){"use strict";var r=e.picreel=e.picreel||{};r.utils=function(){var o,i=r.config.getUrls(),n=[],a=[];function s(e,t,r){var o,i;e&&((o=document.createElement("script")).type="text/javascript",o.src=e,o.async=!1,n.push(0),o.onreadystatechange=o.onload=function(e){var a=o.readyState;this.readyState&&!/loaded|complete/.test(a)||("function"!=typeof t||i||(t(),i=!0),r&&(document.body||head).removeChild(o)),n.pop()},(document.body||document.head).appendChild(o))}return{loadStyles:function(e,t){var r;if(-1!==a.indexOf(e))return-1;(r=document.createElement("link")).setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(r),r.onreadystatechange=r.onload=function(){"function"==typeof t&&t()},a.push(e)},loadScript:s,jsonp:function(t,r,o){var i=r;!function(e,t){var r=document,o=r.head,i=r.createElement("script");i.setAttribute("src",e),o.appendChild(i),t(function(){setTimeout(function(){o.removeChild(i)},0)})}(function(e,t,r){return e+(e.indexOf("?")>0?"&":"?")+t+"="+r}(t,"jsoncallback",i),function(t){e[i]=function(r){e[i]=null,t(),o(r)}})},setText:function(e,t){e["innerText"in e?"innerText":"textContent"]=t},sendDataWithScript:function(e,t,r){s(t+"?data="+e,r||!1,!0)},cookies:{getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,r,o,i,n){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(r)switch(r.constructor){case Number:a=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:a="; expires="+r;break;case Date:a="; expires="+r.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(i?"; domain="+i:"")+(o?"; path="+o:"")+(n?"; secure":""),!0},removeItem:function(e,t,r){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+decodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,r=0;r<t;r++)e[r]=decodeURIComponent(e[r]);return e},getAllCookies:function(){for(var e=document.cookie.split(";"),t="{",r=1;r<=e.length;r++){var o=e[r-1].split("=");t+='"'+o[0].replace(" ","")+'":"'+(void 0!==o[1]?o[1]:"")+'"',r!=e.length&&(t+=",")}return t+="}"},getCookieByNamePart:function(e){if(!e)return null;var t=document.cookie.match(new RegExp("[^;s=]*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"*?[^=]*=s*([^;]*)"));return null!==t?decodeURIComponent(t[1]):null}},checkSupport:function(t,r){var o;if(t){switch(t){case"jquery":!function(){function t(){s(i.libs.jquery,function(){})}var r;void 0===e.jQuery?t():(r=e.jQuery.fn.jquery&&e.jQuery.fn.jquery.split("."))&&(1==r[0]&&r[1]>=7||r[0]>1)||t()}();break;case"json":"undefined"==typeof JSON&&s(i.libs.json3);break;default:return}o=setInterval(function(){0===n.length&&(clearInterval(o),r&&r())},10)}},isIe:function(){var e;return void 0!==o?o:(o=-1,"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(o=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(e)&&(o=parseFloat(RegExp.$1))),o)},createEvent:function(e){try{var t=new Event(e);t.initEvent(e,!0,!0),document.dispatchEvent(t)}catch(t){var r=document.createEvent("Event");r.initEvent(e,!0,!1),document.dispatchEvent(r)}},addEvent:function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)},removeEvent:function(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent("on"+t,r)},getScrollPercentage:function(){return r=e.innerHeight||(document.documentElement||document.body).clientHeight,t=document,o=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight),i=e.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,n=o-r,Math.round(i/n*100);var t,r,o,i,n},getLocationPath:function(){var e=picreel.utils.isIe(),t=location.pathname;if(new RegExp("\\..{2,4}$","ig").exec(t)&&e&&-1!=e){var r=location.pathname.split("/");r.length>=2&&(r[r.length-1]=""),t=r.join("/")}return t},getParameterByName:function(r,o){o||(o=e.location.href);var i=new RegExp("[\\?&]"+r+"=([^&#]*)").exec(o);return i&&i[1]||t},removeSpecificStyleProperty:function(e,t){var r,o=new RegExp("(; |^){1}("+e+"[^;]+; ?)"),i=t.attr("style");i&&(r=i.match(o)),r&&r[2]&&t.attr("style",i.replace(r[2],""))},removePicreelElements:function(){for(var e=document.getElementsByClassName("picreel-element"),t=e.length-1;0<=t;t--)e[t]&&e[t].parentElement&&e[t].parentElement.removeChild(e[t])},getSupportedCssProp:function(e){for(var t=document.documentElement,r=0;r<e.length;r++)if(e[r]in t.style)return e[r]},documentHeight:function(){return Math.max(document.documentElement.clientHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},addCssTransform:function(e,t){var o=r.utils.getSupportedCssProp(["transform","MozTransform","WebkitTransform","msTransform","OTransform"]);void 0!==o&&(e.style[o]=t)},isEmail:function(e){return!(-1==e.search(/[_a-z0-9-]+(\.[_a-z0-9-]+)*(\+[a-z0-9-]+)?@[a-z0-9-]+\.[a-z0-9-]+(\.[_a-z0-9-]+)*/i))},isPhone:function(e){return!(-1==e.search(/^\+?\d{5,13}$/i))},getDomainFromUrl:function(e){var t=e=(e=(e=(e=(e=(e=e.replace(new RegExp(/^\s+/),"")).replace(new RegExp(/\s+$/),"")).replace(new RegExp(/\\/g),"/")).replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"")).replace(new RegExp(/^www\./i),"")).replace(new RegExp(/\/(.*)/),"");if(e.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?e=e.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):e.match(new RegExp(/\.[a-z]{2,4}$/i))&&(e=e.replace(new RegExp(/\.[a-z]{2,4}$/i),"")),e.match(new RegExp(/\./g))){var r=t.split(".");r.shift(),t=r.join(".")}return t},customAlert:function(e){var t=document.createElement("div");t.className="picreel-custom-alert-container",t.style.cssText="transition:all 0.3s ease-in; font:400 16px / 20px 'Segoe UI', 'Open Sans', 'Helvetica Neue', Helvetica, Arial;position: fixed;top: 0;right: 0;bottom: 0;left: 0;padding: 0;margin: 0;z-index: 2147483647;",t.innerHTML='<div class="picreel-custom-alert-bg" style="position: fixed;top: 0;right: 0;bottom: 0;left: 0;padding: 0;margin: 0;background-color: #252525;opacity: .5;z-index: 2147483648;font:inherit;"></div><div class="picreel-custom-alert" style="transition:all 0.3s ease-in; position: relative;margin: 5% auto;min-height: 110px;max-width: 360px;padding: 24px 24px 0 24px;outline: 0;background-color: #fff;-webkit-box-shadow: 0px 15px 20px 0px rgba(0, 0, 0, 0.25);box-shadow: 0px 15px 20px 0px rgba(0, 0, 0, 0.25);border-radius: 2px;z-index: 2147483649;font:inherit;"><div class="picreel-custom-alert-header" style="font:inherit;color: black;font-weight: bold;background: #fafafa;border-bottom: #eee 1px solid;border-radius: 0;padding: 16px 24px;margin: -24px -24px 0 -24px;"><span>Alert</span><button class="picreel-custom-alert-close" style="width: 10px;height: 10px;margin-left: 10px;padding: 10px;border: 0;position:absolute;top:10px;right:10px;background-color: transparent;background-repeat: no-repeat;background-position: center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMy8xNOrZqugAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAh0lEQVQYlY2QsQ0EIQwEB9cBAR1CJUaI/gigDnwR6NBL/7/xWLNrZ2b8EwGotVpr7eOitWa1VjugiNB7R1UPrKrWe0dEAHBbXUqxMQbeewDmnHjvyTm7C3zDwAUd9c63YQdUVdu6EAJzzquz7HXvTiklt+H9DQFYaxFjvDqllFyMkbXWvfpXHjJrWFgdBq/hAAAAAElFTkSuQmCC);cursor: pointer;font:inherit;"></button></div><div class="picreel-custom-alert-body" style="color: black;min-height: 56px;font:inherit;"><div class="picreel-custom-alert-content" style="font:inherit;padding: 16px 0 16px 0;text-decoration: none; text-transform: none;text-align: left;"></div></div><div class="picreel-custom-alert-footer" style="padding: 4px;margin-left: -24px;margin-right: -24px;min-height: 43px;background: #fbfbfb;border-top: #eee 1px solid;border-radius: 0 0 2px 2px;text-align:center;font:inherit;"><button class="picreel-custom-alert-ok picreel-custom-alert-close" id="picreel-custom-alert-ok" style="font:inherit;min-width: 88px; min-height: 35px;-webkit-appearance: button;cursor: pointer;background: grey;border: 0;font-size: 14px;font-weight: bold;text-transform: uppercase;margin: 4px;color: white;">OK</button></div></div>',t.querySelector(".picreel-custom-alert-content").innerHTML=e,document.body.appendChild(t);var r=document.querySelectorAll(".picreel-custom-alert-close"),o=function(){console.log("closeCustomAlert"),t.remove(),picreel.utils.removeEvent(r,"click",o),picreel.Popup.cookieSubmit("set_input_focus")};r.forEach(e=>{picreel.utils.addEvent(e,"click",o)})}}}()}(window),function(e){"use strict";var t=e.picreel=e.picreel||{};t.tracker=function(){var r=t.utils.cookies,o=t.config.isDebug(),i=!1,n=86400,a=18e5,s=!1,l=!1,p={sourceUrl:encodeURIComponent(location.href),sourceHost:encodeURIComponent(e.location.origin?e.location.origin:e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")),cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,language:navigator.language,userAgent:encodeURIComponent(navigator.userAgent),screenWidth:e.innerWidth,screenHeight:e.innerHeight,passedTemplates:u(),campaignId:0,referrer:document.referrer,currentTemplate:0,isReturning:c()};function c(){var e=!1;return!0===o&&console.log("tracker.isUserReturning()"),p&&void 0!==p.isReturning?p.isReturning:(r.getItem("picreel_tracker__first_visit")&&new Date-new Date(r.getItem("picreel_tracker__first_visit"))>=a&&(e=!0),e)}function u(){var e,t=[],r=document.cookie.match(new RegExp("template\\d+Id=[^;]*","ig")),o=document.cookie.match(new RegExp("picreel_popup__template_passed_\\d+[^;]*","ig"));for(o&&o.length?e=r&&r.length?Math.max(r.length,o.length):o.length:r&&r.length&&(e=r.length);e--;)r&&void 0!==r[e]&&t.push(r[e].split("=")[1]),o&&void 0!==o[e]&&t.push(o[e].split("=")[1]);return t.length?t.join(","):""}return{getGetParameters:function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(e[t].src.indexOf("/jstracker.content.min.js")>-1||e[t].src.indexOf("/jstracker.content.api.min.js")>-1){for(var r=e[t].src.split("?").pop().split("&"),o={},i=0;i<r.length;i++){var n=r[i].split("=");o[n[0]]=n[1]}return o}return{}},getGEOData:function(e){var t="United States",r=new XMLHttpRequest;r.open("GET","//pro.ip-api.com/json?key=AxkQodIWMY4GbB8&fields=country,countryCode,query",!0),r.timeout=610,r.onload=function(){if(console.log("onload",r.responseText),"invalid key"===r.responseText.trim())console.log("error",r.responseText),s=t;else{var o=JSON.parse(r.responseText);s=void 0!==o.country&&""!==o.country?o.country:t,void 0!==o.query&&""!==o.query&&(l=o.query)}e()},r.ontimeout=function(r){s=t,e()},r.onerror=function(r){s=t,e()},r.send()},getGEOCountryCode:function(){return s},getGEOclientIP:function(){return l},getPrlGetParametersUrl:function(){for(var e=location.href.split("?").pop().split("&"),t="",r=0;r<e.length;r++){var o=e[r].split("=");new RegExp("^prl_(.)*").exec(o[0])&&(t+="&"+o[0]+"="+o[1])}return t},setPrlGetParametersCookie:function(e){r.setItem("prl_get_params",e,1/0,"/")},getPrlGetParametersCookie:function(){return r.getItem("prl_get_params")},getUserData:function(){return p},getNewUserData:function(){var t;t={sourceUrl:encodeURIComponent(location.href),sourceHost:encodeURIComponent(e.location.origin?e.location.origin:e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")),cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,language:navigator.language,userAgent:encodeURIComponent(navigator.userAgent),screenWidth:e.innerWidth,screenHeight:e.innerHeight,passedTemplates:u(),campaignId:0,referrer:document.referrer,currentTemplate:0,isReturning:c()},console.log("userData",t),p=t},getPageView:function(){return r.getItem("picreel_tracker__page_views")},isReturning:c,isPicreelBlocked:function(){return null!==r.getItem("picreel_block")},isJustVisited:function(){return i},isVisitedCookie:function(){return null===r.getItem("picreel_tracker__visited")},setVisited:function(){null===r.getItem("picreel_tracker__visited")&&(i=!0,r.setItem("picreel_tracker__visited",1,n,"/"))},blockPicreel:function(e){r.setItem("picreel_block",1,n*e,t.utils.getLocationPath())},addPageView:function(){var e=null===r.getItem("picreel_tracker__page_views")?1:parseInt(r.getItem("picreel_tracker__page_views"))+1;r.removeItem("picreel_tracker__page_views"),r.setItem("picreel_tracker__page_views",e,1/0,"/"),null===r.getItem("picreel_tracker__first_visit")&&r.setItem("picreel_tracker__first_visit",new Date,1/0,"/"),!0===o&&console.log("tracker.addPageView()",e)},setIsMobile:function(e,t,o,i){r.setItem("picreel__is_mobile_"+e,t,o||1/0,i||"/")},getIsMobile:function(e){r.getItem("picreel__is_mobile_"+e)},popup:{isViewed:function(e){return r.getItem("__viewed")||r.getItem("picreel_popup__viewed")==e},setViewed:function(e){r.setItem("picreel_popup__viewed",e,n,t.utils.getLocationPath())},isPassed:function(e){return null!==r.getItem("__invisible")?r.getItem("__invisible"):r.getItem("picreel_popup__passed")==e},setPassed:function(e,t,o){r.setItem("picreel_popup__passed",e,t||1/0,o||"")},getViewedCookie:function(){var e=r.getItem("picreel_popup__viewed");return e||""},getPassedCookie:function(){var e=r.getItem("picreel_popup__passed");return null!==e?e:""},setTemplatePassed:function(e,o){var i=t.utils.getDomainFromUrl(location.host);r.setItem("picreel_popup__template_passed_"+e,e,o||1/0,"/","."+i)},isTemplatePassed:function(e){return null!==r.getItem("picreel_popup__template_passed_"+e)},getPassedTemplates:u,setRBSettingsToCookie:function(e){JSON.stringify(e),r.setItem("picreel_reminderbar",JSON.stringify(e),1/0,"/")},getRBSettingsFromCookie:function(){var e=r.getItem("picreel_reminderbar");return JSON.parse(e)},connectPopupTemplateIdRB:function(e,t,o){r.setItem("picreel_reminderbar__popup_id",e,t||1/0,o||"/")},getConnectedPopupTemplateIdRB:function(){var e=r.getItem("picreel_reminderbar__popup_id");return null!==e?e:""},setReminderbarTypeToShow:function(e,t,o){r.setItem("picreel_reminderbar__show_type_"+picreel.tracker.popup.getReminderbarId(),e,t||1/0,o||"/")},getReminderbarTypeToShow:function(e){var t=r.getItem("picreel_reminderbar__show_type_"+e);return null!==t?t:""},setReminderbarPassed:function(e,t,o){r.setItem("picreel_reminderbar__passed_"+e,e,t||1/0,o||"/")},setReminderbarId:function(e,t,o){r.setItem("picreel_reminderbar__id",e,t||1/0,o||"/")},getReminderbarId:function(){var e=r.getItem("picreel_reminderbar__id");return null!==e?e:""},setReminderbarShowPopup:function(e,t,o,i){r.setItem("picreel_reminderbar__show_popup_"+e,t,o||1/0,i||"/")},getReminderbarShowPopup:function(e){var t=r.getItem("picreel_reminderbar__show_popup_"+e);return null!==t?t:""},setReminderbarIsTrigger:function(e,t,o,i){r.setItem("picreel_reminderbar__is_trigger_"+e,t,o||1/0,i||"/")},getReminderbarIsTrigger:function(e){var t=r.getItem("picreel_reminderbar__is_trigger_"+e);return null!==t?t:""},setOnlyReminderbarTrigger:function(e,t){r.setItem("picreel_reminderbar__trigger_popup_"+e,"1",t||1/0,"/")},isOnlyReminderbarTrigger:function(e){return null!==r.getItem("picreel_reminderbar__trigger_popup_"+e)},isReminderbarPassed:function(e){return null!==r.getItem("picreel_reminderbar__passed_"+e)},isReminderbarSetted:function(){return null!==r.getItem("picreel_reminderbar")},clearReminderbarCookies:function(e){r.removeItem("picreel_reminderbar__passed_"+e),r.removeItem("picreel_reminderbar__show_type_"+e),r.removeItem("picreel_reminderbar__id"),r.removeItem("picreel_reminderbar__popup_id"),r.removeItem("picreel_reminderbar")}},poll:{isViewed:function(e){return r.getItem("picreel_poll__viewed")==e},setViewed:function(e){r.setItem("picreel_poll__viewed",e,n)},isPassed:function(e){return r.getItem("picreel_poll__passed")==e},setPassed:function(e){!0===o&&console.log("tracker.setPollPassed()",{pollId:e}),r.setItem("picreel_poll__passed",e,1/0),r.setItem("picreel_poll__template_passed"+e,e,1/0),r.setItem("picreel_poll__"+e+"_pass_date",new Date,1/0)},setLastPassedQuestion:function(e,t){r.setItem("picreel_poll__last_passed_question",e,1/0),t&&r.setItem("picreel_poll__last_passed_goTo",t,1/0)},getLastPassed:function(){var e=r.getItem("picreel_poll__last_passed_question"),t=r.getItem("picreel_poll__last_passed_goTo");return!0===o&&console.log("tracker.getLastPassedQuestion()",{cookie:e,goTo:r.getItem("picreel_poll__last_passed_goTo")}),{questionId:null!==e&&e,goTo:null!==t&&t}},getViewedCookie:function(){var e=r.getItem("picreel_poll__viewed");return e||""},getPassedCookie:function(){var e=r.getItem("picreel_poll__passed");return e||""},clearPollCookies:function(e){r.removeItem("picreel_poll__last_passed_goTo"),r.removeItem("picreel_poll__last_passed_question"),r.removeItem("picreel_poll__"+e+"_pass_date"),r.removeItem("picreel_poll__viewed"),r.removeItem("picreel_poll__passed"),r.removeItem("picreel_poll__template_passed"+e)}},nanobar:{isViewed:function(e){return r.getItem("__viewed")||r.getItem("picreel_nanobar__viewed")==e},setViewed:function(e){r.setItem("picreel_nanobar__viewed",e,n,t.utils.getLocationPath())},isPassed:function(e){return null!==r.getItem("__invisible")?r.getItem("__invisible"):r.getItem("picreel_nanobar__passed")==e},setPassed:function(e,t,o){r.setItem("picreel_nanobar__passed",e,t||1/0,o||"")},getViewedCookie:function(){var e=r.getItem("picreel_nanobar__viewed");return e||""},getPassedCookie:function(){var e=r.getItem("picreel_nanobar__passed");return null!==e?e:""},setTemplatePassed:function(e,o){var i=t.utils.getDomainFromUrl(location.host);r.setItem("picreel_nanobar__template_passed_"+e,e,o||1/0,"/","."+i)},isTemplatePassed:function(e){return null!==r.getItem("picreel_nanobar__template_passed_"+e)},getPassedTemplates:function(){var e,t=[],r=document.cookie.match(new RegExp("picreel_nanobar__template_passed_\\d+[^;]*","ig"));for(r&&r.length&&(e=r.length);e--;)r&&void 0!==r[e]&&t.push(r[e].split("=")[1]);return t.length?t.join(","):""}}}}()}(window),function(e){"use strict";var t=e.picreel=e.picreel||{};t.PollQuestion=function(r){var o,i,n,a=e.picreel.jQuery||jQuery,s=t.config.isDebug(),l=this;function p(e){e?(a(".b-picreel-poll-wrapper").css("overflow-y","hidden"),a(".picreel-poll-body").css("top","50%"),a(".picreel-poll-body").css("-webkit-transform","translateY(-50%)"),a(".picreel-poll-body").css("-moz-transform","translateY(-50%)"),a(".picreel-poll-body").css("-ms-transform","translateY(-50%)"),a(".picreel-poll-body").css("-o-transform","translateY(-50%)"),a(".picreel-poll-body").css("transform","translateY(-50%)")):(a(".b-picreel-poll-wrapper").css("overflow-y","scroll"),a(".picreel-poll-body").css("top","0"),a(".picreel-poll-body").css("-webkit-transform","translateY(0)"),a(".picreel-poll-body").css("-moz-transform","translateY(0)"),a(".picreel-poll-body").css("-ms-transform","translateY(0)"),a(".picreel-poll-body").css("-o-transform","translateY(0)"),a(".picreel-poll-body").css("transform","translateY(0)"))}function c(){var e='<div class="picreel-poll-question">'+l.text+"</div>";return!0===s&&console.log("question | generateQuestionText()",{questionId:l.id,questionText:e}),e}this.parentPoll=r.pollId,this.id=r.questionData.id,this.text=r.questionData.text,this.type=r.questionData.type,this.inputType=r.questionData.inputType,this.randomize=r.questionData.randomize,this.goTo=r.questionData.goTo,this.isRequired=r.questionData.isRequired,this.answers=r.questionData.answers,this.answer={},this.button=r.questionData.button,this.html=r.questionData.html,this.label=r.questionData.label,this.description=r.questionData.description,this.isAnswered=!1,this.collectData=function(){var e,t,r,o;function i(e,t){var r=e.find(".picreel-poll-answer-comment").find("input, textarea").val();r&&(t.comment=r)}switch(this.answer.data={},l.type){case"text":r=l.$el.find(".picreel-poll-answer-input").val();var n=l.$el.find(".picreel-poll-answer-input").attr("name");l.answer.data[n]=r;break;case"textarea":r=l.$el.find(".picreel-poll-answer-textarea").val(),l.answer.data={text:r};break;case"radio":e=l.$el.find(".picreel-poll-answer-selected"),o=parseInt(e.attr("data-answer-index")),isNaN(o)?l.answer.data=null:(l.answer={goTo:l.answers[o].goTo,data:{answerId:this.answers[o].answerId}},i(e,l.answer.data));break;case"checkbox":t=l.$el.find(".picreel-poll-answer-selected"),l.answer.data={},l.answer.data.answers=[],t.each(function(t,r){var n={};e=a(r),o=parseInt(e.attr("data-answer-index")),isNaN(o)?l.answer.data={answers:[]}:(n.answerId=l.answers[o].answerId,i(e,n),l.answer.data.answers.push(n))});break;case"score":r=l.$el.find(".picreel-poll-answer-selected").attr("data-answer-index"),l.answer={text:r}}!0===s&&console.log("question.collectData()",{answer:l.answer})},this.validateQuestion=function(){var e=!0;if(!0===s&&console.log("question.isRequired = "+l.isRequired,!l.isRequired),l.isRequired){var t="This step is required";switch(l.type){case"text":switch(l.inputType){case"text":e=""!==l.$el.find(".picreel-poll-answer-input").val();break;case"email":t="Please enter valid email address",e=picreel.utils.isEmail(l.$el.find(".picreel-poll-answer-input").val());break;case"tel":t="Please enter valid phone number",e=picreel.utils.isPhone(l.$el.find(".picreel-poll-answer-input").val())}break;case"textarea":e=""!==l.$el.find(".picreel-poll-answer-textarea").val();break;case"radio":case"checkbox":t="Please select at least one answer",e=!!l.$el.find(".picreel-poll-answer-selected").length}e||alert(t)}else e=!0;return!0===s&&console.log("question.validateQuestion()",e),e},this.doAnswer=function(){if(!0===r.isOneQuestion)return!1;if(!0===s&&(console.log("------------------------------------------"),console.log("question.doAnswer()",{questionId:l.id,validation:l.validateQuestion()})),l.validateQuestion()){if(!0===r.sendActionData&&!r.isPreviewMode){var e={campaign_id:l.parentPoll,template_id:null};a.ajax({url:t.config.getUrls().main+"api/action",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:e}),t.tracker.poll.setPassed(l.parentPoll)}var o;l.isAnswered=!0,l.collectData(),o=l.answer.goTo?l.answer.goTo:l.goTo?l.goTo:void 0,"end"!==l.type&&t.tracker.poll.setLastPassedQuestion(l.id,o),l.sendAnswerData(),l.$el.trigger("picreel-poll-answer")}},this.sendAnswerData=function(){var e,o=t.config.getUrls();l.answer.data.screenId=l.id,l.answer.data.surveyId=l.parentPoll,l.answer.data.requestUrl=r.sourceUrl,l.answer.data.userAgent=r.user_agent,l.answer.data.clientIp=r.client_ip_address,l.answer.data.clientCountry=r.client_country,e=JSON.stringify(l.answer.data),t.utils.sendDataWithScript(e,o.sendAnswer)},this.generateButton=function(){var e,t="";return l.button&&("end"!==l.type?t="<div ":(e=l.button.openInNewTab?' target="_blank" ':"",t+='<a href="'+l.button.redirectUrl+'"'+e),t+='class="picreel-poll-button"style="background-color: '+r.styling.colors.buttons.bg+";color:"+r.styling.colors.buttons.text+';">',t+=l.button.text,"end"!==l.type?t+="</div>":t+="</a>"),!0===s&&console.log("question.generateButton()",{questionId:l.id,buttonHtml:t}),t},o="",!0===s&&console.log("question | init()",{questionId:l.id,question:l}),o+=(n="",l.description?n="before"==l.description.position?'<div class="picreel-poll-question-wrapper"><div class="picreel-poll-question-description picreel-poll-question-description-before"><p style="color: '+r.styling.colors.wrapper.descColor+';">'+l.description.text+'</p></div><hr class="picreel-poll-separator picreel-poll-description-separator" style="color: '+r.styling.colors.wrapper.separatorTop+"; border-top-color: "+r.styling.colors.wrapper.separatorTop+";border-bottom-color: "+r.styling.colors.wrapper.separatorBot+';"/>'+c():'<div class="picreel-poll-question-wrapper">'+c()+'<div class="picreel-poll-question-description picreel-poll-question-description-after"><p style="color: '+r.styling.colors.wrapper.descColor+';">'+l.description.text+"</p></div>":"end"!==l.type&&(n='<div class="picreel-poll-question-wrapper">'+c()),!0===s&&console.log("question | generateHeader()",{questionId:l.id,headerHtml:n}),n),o+=function(){var e="",t=0;switch(!l.randomize||"radio"!==l.type&&"checkbox"!==l.type||function(){for(var e,t,r=l.answers,o=r.length;o;e=Math.floor(Math.random()*o),t=r[--o],r[o]=r[e],r[e]=t);!0===s&&console.log("question | randomizeAnswers()",{questionId:l.id})}(),l.type){case"text":e+='<div class="picreel-poll-answers picreel-poll-answers-text">',"text"===l.inputType&&(e+='<input maxlength="100" name="text" class="picreel-poll-answer-text-input picreel-poll-answer-input picreel-poll-answer" type="text" value="">'),"email"===l.inputType&&(e+='<input maxlength="100" name="email" placeholder="Enter email" class="picreel-poll-answer-text-input picreel-poll-answer-input picreel-poll-answer" type="email" value="">'),"tel"===l.inputType&&(e+='<input maxlength="13" name="phone" placeholder="Enter phone" class="picreel-poll-answer-text-input picreel-poll-answer-input picreel-poll-answer" type="tel" value="">'),e+="</div>";break;case"textarea":e+='<div class="picreel-poll-answers picreel-poll-answers-text"><textarea maxlength="300" class="picreel-poll-answer-text-input picreel-poll-answer-textarea picreel-poll-answer" type="text" value=""></textarea></div>';break;case"score":for(e+='<div class="picreel-poll-answers picreel-poll-answers-score"><div class="picrell-poll-answers-score-list">';t<10;t++)e+='<div style="background-color: '+r.styling.colors.answers.bg+"; color: "+r.styling.colors.answers.text+'" data-answer-index="'+t+'" class="picreel-poll-answer-score picreel-poll-answer">'+t+"</div>";e+='<div class="picreel-poll-clear"></div></div><div class="picreel-poll-answers-score-label"><div class="picreel-poll-answers-score-label-left">'+l.label.left+'</div><div class="picreel-poll-answers-score-label-right">'+l.label.right+"</div></div></div>";break;case"radio":case"checkbox":var o="radio"===l.type?"picreel-poll-answer-control-dot":"",i="radio"===l.type?"picreel-poll-answers-radio-dot":"";if(e+='<div class="picreel-poll-answers picreel-poll-answers-radio '+i+'"><div class="picrell-poll-answers-list">',void 0!==l.answers)for(;t<l.answers.length;t++)e+='<div data-answer-index="'+t+'" class="picreel-poll-answer" style="background-color: '+r.styling.colors.answers.bg+"; color: "+r.styling.colors.answers.text+'"><div class="picreel-poll-answer-control-wrapper '+o+'">'+("popup"===r.pollPosition||"fullscreen"===r.pollPosition?"radio"===l.type?'<svg  class="picreel-poll-answer-control" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" height="30px" width="30px"><circle stroke="'+r.styling.colors.answers.control+'" fill="none" r="12" cx="15" cy="15" stroke-width="5"></circle><circle cx="15" cy="15" r="5" stroke="black" stroke-width="0" fill="'+r.styling.colors.answers.control+'" class="picreel-poll-answer-control-radio-dot"></svg>':'<svg class="picreel-poll-answer-control" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 72 72" style="enable-background:new 0 0 72 72;" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:'+r.styling.colors.answers.control+';opacity:1;" d="M0,0v72h72V0H0z M57.6,57.6H14.4V14.4H57.6V57.6z"/><g class="picreel-poll-answer-control-radio-dot"><polygon style="fill:none;" points="68.903,26.24 52.959,10.297 27.36,35.896 16.16,24.696 3.097,37.761 29.921,64.583 33.12,61.384 33.44,61.704  "/><polygon style="fill-rule:evenodd;clip-rule:evenodd;fill:none;" points="68.903,26.24 52.959,10.297 27.36,35.896 16.16,24.696 3.097,37.761 29.921,64.583 33.12,61.384 33.44,61.704"/><polygon style="fill-rule:evenodd;clip-rule:evenodd;fill:'+r.styling.colors.answers.control+';" points="63.144,26.24 52.959,16.057 30.239,38.776 19.04,27.576 8.856,37.761 29.921,58.823 30.24,58.504 30.559,58.823"/></g>':'<svg class="picreel-poll-answer-control" width="11.778" height="8.778" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="svg_1"><path id="svg_2" d="m11.339,0.439c0.585,0.586 0.585,1.536 0,2.121l-5.778,5.779c-0.586,0.586 -1.536,0.586 -2.121,0c-0.586,-0.586 -0.586,-1.536 0,-2.121l5.778,-5.778c0.585,-0.586 1.535,-0.586 2.121,-0.001z" fill="#ffffff" clip-rule="evenodd" fill-rule="evenodd"></path><path id="svg_3" d="m0.439,3.439c-0.585,0.586 -0.585,1.536 0,2.121l2.778,2.778c0.586,0.586 1.536,0.586 2.122,0c0.585,-0.586 0.585,-1.536 0,-2.121l-2.778,-2.778c-0.586,-0.585 -1.536,-0.585 -2.122,0z" fill="#ffffff" clip-rule="evenodd" fill-rule="evenodd"></path></g></svg>')+'</div><div class="picreel-poll-answer-text picreel-poll-answer-radio-text">'+l.answers[t].text+"</div>",l.answers[t].comment&&("small"===l.answers[t].comment?e+='<div class="picreel-poll-answer-comment"><input type="text"class="picreel-poll-answer-comment-input"/></div>':"large"===l.answers[t].comment&&(e+='<div class="picreel-poll-answer-comment"><textarea class="picreel-poll-answer-comment-textarea"></textarea></div>')),e+="</div>";e+="</div></div></div>";break;case"end":e='<div class="picreel-poll-answers picreel-poll-answers-end"><div class="picreel-poll-answer-end-mark-wrapper"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-10 -10 148 148" class="picreel-poll-answer-end-mark"><path style="stroke: '+r.styling.colors.checkmark.border+"; fill: "+r.styling.colors.checkmark.bg+';" class="picreel-poll-answer-end-mark-circle" d="m 128,64 a 64,64 0 1 1 -128,0 64,64 0 1 1 128,0 z"></path><path class="picreel-poll-answer-end-mark-sign" d="m 25.6,67.3 21.9,21.8 c 3.5,3.5 10.4,3.6 14, 0.1 L 104.9,47.3 92.8,34.2 54.4,71.4 38.3,55.2 z"></path></svg></div><div class="picreel-poll-question picreel-poll-question-end">'+l.html+"</div></div>"}return!0===s&&console.log("question | generateAnswers()",{questionId:l.id,answerHtml:e}),e}(),l.el=o,l.$el=a(o),i=l.$el.find(".picreel-poll-answer"),!0===s&&console.log("question | bindEvents()",{questionId:l.id}),"checkbox"!==l.type&&"score"!==l.type||l.$el.find(".picreel-poll-answer").on({mouseover:function(){a(this).css("backgroundColor",r.styling.colors.answers.hover)},mouseout:function(){a(this).css("backgroundColor",r.styling.colors.answers.bg)}}),"radio"===l.type&&l.$el.find(".picreel-poll-answer").on({mouseover:function(){a(this).css("backgroundColor",r.styling.colors.answers.hover)},mouseout:function(){a(this).hasClass("picreel-poll-answer-selected")||a(this).css("backgroundColor",r.styling.colors.answers.bg)},click:function(){l.$el.find(".picreel-poll-answer").css("backgroundColor",r.styling.colors.answers.bg),a(this).css("backgroundColor",r.styling.colors.answers.hover)}}),"radio"===l.type&&i.on({click:function(t){var o=a(t.target);if(console.log(o),!o.hasClass("picreel-poll-answer-comment-input")&&!o.hasClass("picreel-poll-answer-comment-textarea")){a(this).addClass("picreel-poll-answer-selected").siblings().removeClass("picreel-poll-answer-selected");var i=a(e).width()>768&&a(".picreel-poll-body").height()<=500?435:a(".picreel-poll-body").height();a(e).height()-65-35<i?(a(".b-picreel-poll-wrapper").css("height",a(e).height()-35+"px"),p(0)):(a(".b-picreel-poll-wrapper").css("height",i+65+"px"),p(1)),!0===r.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},e.location.protocol+"//"+e.location.hostname+"/user/intro/campaigns"),l.button||l.doAnswer()}}}),"text"!==l.type&&"textarea"!==l.type||i.on({keydown:function(e){a(this).val().length,13===e.keyCode&&l.doAnswer()}}),"checkbox"===l.type&&i.on({click:function(t){var o=a(t.target);if(!o.hasClass("picreel-poll-answer-comment-input")&&!o.hasClass("picreel-poll-answer-comment-textarea")){a(this).toggleClass("picreel-poll-answer-selected");var i=a(e).width()>768&&a(".picreel-poll-body").height()<=500?435:a(".picreel-poll-body").height();a(e).height()-65-35<i?(a(".b-picreel-poll-wrapper").css("height",a(e).height()-35+"px"),p(0)):(a(".b-picreel-poll-wrapper").css("height",i+65+"px"),p(1)),!0===r.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},e.location.protocol+"//"+e.location.hostname+"/user/intro/campaigns"),l.button||l.doAnswer()}}}),"score"===l.type&&i.on({click:function(){a(this).addClass("picreel-poll-answer-selected"),l.doAnswer()},mouseover:function(){a(this).css("backgroundColor",r.styling.colors.answers.npsHover)},mouseout:function(){a(this).css("backgroundColor",r.styling.colors.answers.bg)}})}}(window),function(e){"use strict";var t,r=e.picreel=e.picreel||{};r.Poll=function(){var o,i,n=r.config.isDebug(),a={},s=[],l=r.config.getUrls(),p={inserted:!1,currentQuestion:null};function c(c){if(t=e.picreel.jQuery||jQuery,!0===n&&console.log("poll | initPoll()"),i=r.tracker.getUserData(),!0===(o=c).isPreviewMode&&P(o.pollId),!r.tracker.poll.isPassed(o.pollId)){p.shown="opened"===o.showOptions.showState,"string"==typeof o.showOptions.animation&&""!==o.showOptions.animation&&"none"!==o.showOptions.animation&&r.utils.loadStyles(r.config.getUrls().s3+"css/popup-animation.min.css");var d="popup"===o.showOptions.position||"fullscreen"===o.showOptions.position?l.styles.surveyPopup:l.styles.survey;r.utils.loadStyles(d,function(){if(function(){var e;!0===n&&(console.log("------"),console.log("poll | initQuestions() start"));for(var t=0;t<o.questions.length;t++){var a={questionData:o.questions[t],styling:o.styling,isPreviewMode:o.isPreviewMode,isOneQuestion:o.isOneQuestion,noResizeSurvey:o.noResizeSurvey,sendActionData:0==t,pollId:o.pollId,pollPosition:o.showOptions.position,sourceUrl:i.sourceUrl,client_ip_address:o.client_ip_address,client_country:o.client_country,user_agent:i.userAgent};e=new r.PollQuestion(a),s.push(e)}!0===n&&(console.log("poll | initQuestions() end",{questions:s}),console.log("------"))}(),function(){var e='<div class="b-picreel-poll-wrapper picreel-poll-wrapper-'+o.showOptions.showState+" picreel-poll-wrapper-theme-"+o.showOptions.theme+" picreel-poll-wrapper-position-"+o.showOptions.position+("none"!==o.showOptions.animation?" picreel-animated picreel-animation-"+o.showOptions.animation:"")+'" style="background-color: '+("popup"===o.showOptions.position?o.styling.colors.wrapper.bg+";":"transparent;")+" color:"+o.styling.colors.wrapper.text+';">'+function(){var e="";"popup"===o.showOptions.position||"fullscreen"===o.showOptions.position?e+='<div class="picreel-poll-close-wrapper" style="background-color: '+o.styling.colors.buttons.closeBgColor+';"><svg class="picreel-poll-close-opened" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" height="13px" width="13px"><path fill="rgb( 255, 255, 255 )" d="M8.28600000000006,6.5 C8.28600000000006,6.5 11.604,9.823 11.604,9.823 C12.115,10.335 12.126,11.153 11.6310000000001,11.65 C11.135,12.147 10.3199999999999,12.135 9.80999999999995,11.623 C9.80999999999995,11.623 6.49000000000001,8.299 6.49000000000001,8.299 C6.49000000000001,8.299 3.17000000000007,11.623 3.17000000000007,11.623 C2.66000000000008,12.135 1.84500000000003,12.147 1.34899999999993,11.65 C0.85300000000007,11.153 0.86500000000001,10.335 1.375,9.823 C1.375,9.823 4.69399999999996,6.5 4.69399999999996,6.5 C4.69399999999996,6.5 1.375,3.176 1.375,3.176 C0.86500000000001,2.665 0.85300000000007,1.847 1.34899999999993,1.35 C1.84500000000003,0.853 2.66000000000008,0.865 3.17000000000007,1.376 C3.17000000000007,1.376 6.49000000000001,4.701 6.49000000000001,4.701 C6.49000000000001,4.701 9.80999999999995,1.376 9.80999999999995,1.376 C10.3199999999999,0.865 11.135,0.853 11.6310000000001,1.35 C12.126,1.847 12.115,2.665 11.604,3.176 C11.604,3.176 8.28600000000006,6.5 8.28600000000006,6.5 Z "/></svg></div>':e+='<div class="picreel-poll-close-wrapper" style="background-color: '+o.styling.colors.wrapper.bg+';"><svg class="picreel-poll-close-opened" width="16.778" height="9.778" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="svg_1"><path id="svg_2" d="m16.339,0.439c0.585,0.586 0.585,1.536 0,2.121l-6.778,6.779c-0.586,0.586 -1.536,0.586 -2.121,0c-0.586,-0.586 -0.586,-1.536 0,-2.121l6.778,-6.778c0.585,-0.586 1.535,-0.586 2.121,-0.001z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"></path><path id="svg_3" d="m0.439,0.439c-0.586,0.586 -0.586,1.536 0,2.121l6.778,6.778c0.586,0.586 1.536,0.586 2.122,0s0.586,-1.536 0,-2.121l-6.778,-6.778c-0.586,-0.585 -1.536,-0.585 -2.122,0z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"></path></g></svg><svg class="picreel-poll-close-closed" width="16.778" height="9.778" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="svg_1"><path id="svg_2" d="m0.439,9.339c-0.586,-0.586 -0.586,-1.536 0,-2.121l6.778,-6.778c0.586,-0.586 1.536,-0.586 2.121,0c0.586,0.586 0.586,1.536 0,2.121l-6.777,6.778c-0.586,0.586 -1.536,0.586 -2.122,0z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"/><path id="svg_3" d="m16.339,9.339c0.586,-0.586 0.586,-1.536 0,-2.121l-6.778,-6.779c-0.586,-0.586 -1.536,-0.586 -2.122,0s-0.586,1.536 0,2.121l6.778,6.778c0.586,0.587 1.536,0.587 2.122,0.001z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"/></g></svg></div>';return e}()+'<div class="picreel-poll-body"><div class="picreel-poll-questions-animation-wrapper"></div><div class="picreel-poll-button-wrapper"></div>';"popup"!==o.showOptions.position&&"fullscreen"!==o.showOptions.position&&(e+='<div class="picreel-poll-footer">',o.styling.showCopywrite&&(e+=w()),e+='<div class="picreel-poll-clear"></div></div>');if(e+="</div></div>",a.el=t(e),a.questionsWrapper=a.el.find(".picreel-poll-questions-animation-wrapper"),a.buttonWrapper=a.el.find(".picreel-poll-button-wrapper"),"popup"===o.showOptions.position||"fullscreen"===o.showOptions.position){if("popup"===o.showOptions.position&&a.el.css({width:o.styling.width,height:o.styling.height}),a.el.wrap('<div class="picreel-poll-popup-outer-wrapper"/>'),a.el=a.el.parent(),a.resizeWrapper=a.el,"fullscreen"===o.showOptions.position&&(a.el.css({width:"80%",height:"auto"}),a.el.wrap('<div class="picreel-poll-fullscreen-outer-wrapper" style="background-color: '+o.styling.colors.wrapper.bg+';" />'),a.el=a.el.parent(),a.el.find(".picreel-poll-close-wrapper").appendTo(a.el)),"popup"===o.showOptions.position||"fullscreen"===o.showOptions.position){var r='<div class="picreel-poll-footer">';o.styling.showCopywrite&&(r+=w()),r+='<div class="picreel-poll-clear"></div></div>',a.el.append(r)}a.backdrop=t('<div class="picreel-poll-backdrop"/>')}!0===n&&console.log("poll | generateTemplate()",{template:e})}(),h(!0))if(function(){if(a.el.find(".picreel-poll-close-wrapper").on("click",function(){!1===o.isOneQuestion&&x()}),a.el.on("picreel-poll-answer",function(e){"end"===p.currentQuestion.type?!1===o.isOneQuestion&&y():!1===o.isOneQuestion&&T()}),a.el.on({mouseover:function(){t(this).css("backgroundColor",o.styling.colors.buttons.hover)},mouseout:function(){t(this).css("backgroundColor",o.styling.colors.buttons.bg)},click:function(e){!1===o.isOneQuestion?p.currentQuestion.doAnswer():e.preventDefault()}},".picreel-poll-button"),"fullscreen"===o.showOptions.position||"popup"===o.showOptions.position)o.styling.width,t(e);!0===n&&console.log("poll | bindEvents()")}(),"object"==typeof o.showOptions.showType)for(var l=0;l<o.showOptions.showType.length;l++)o.showOptions.showValue=o.showOptions.showType[l].showValue,u(o.showOptions.showType[l].showType);else"string"==typeof o.showOptions.showType&&u()})}}function u(i){if(!(o.showOptions.viewsToShow&&!isNaN(parseInt(o.showOptions.viewsToShow))&&r.tracker.getPageView()<parseInt(o.showOptions.viewsToShow)))switch(i||o.showOptions.showType){case"instant":m();break;case"scroll":var n=t(e),a=isNaN(parseInt(o.showOptions.showValue))?50:parseInt(o.showOptions.showValue),s=null;t(e).on("scroll.picreel-poll-scroll",function(){s&&clearTimeout(s),s=setTimeout(function(){r.utils.getScrollPercentage()>a&&(m(),n.off("scroll.picreel-poll-scroll"))},200)});break;case"leave":case"exit":var l=o.showOptions.timeToWait?o.showOptions.timeToWait:0;setTimeout(function(){t(document).on("mouseout.picreel-poll-leave",function(r){var o,i=(r=r||e.event).relatedTarget||r.toElement;o=!r.target||"SELECT"!=r.target.tagName.toUpperCase(),(!i||"HTML"==i.nodeName)&&r.clientY<=20&&o&&(!1===p.inserted&&m(),t(document).off("mouseout.picreel-poll-leave"))})},1e3*+l);break;case"timed":setTimeout(function(){!1===p.inserted&&m()},1e3*o.showOptions.showValue);break;case"both":u("exit"),u("timed")}}function d(e){e?(t(".b-picreel-poll-wrapper").css("overflow-y","hidden"),t(".picreel-poll-body").css("top","50%"),t(".picreel-poll-body").css("-webkit-transform","translateY(-50%)"),t(".picreel-poll-body").css("-moz-transform","translateY(-50%)"),t(".picreel-poll-body").css("-ms-transform","translateY(-50%)"),t(".picreel-poll-body").css("-o-transform","translateY(-50%)"),t(".picreel-poll-body").css("transform","translateY(-50%)")):(t(".b-picreel-poll-wrapper").css("overflow-y","scroll"),t(".picreel-poll-body").css("top","0"),t(".picreel-poll-body").css("-webkit-transform","translateY(0)"),t(".picreel-poll-body").css("-moz-transform","translateY(0)"),t(".picreel-poll-body").css("-ms-transform","translateY(0)"),t(".picreel-poll-body").css("-o-transform","translateY(0)"),t(".picreel-poll-body").css("transform","translateY(0)"))}function m(){r.tracker.poll.setViewed(o.pollId),t("body").append(a.el).append(a.backdrop),p.inserted=!0,o.isOneQuestion||o.noResizeSurvey?o.noResizeSurvey&&setTimeout(function(){var e=parseInt(t(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(t(".b-picreel-poll-wrapper").css("padding-bottom")),r=t(".picreel-poll-body").height()<=500?500-e:t(".picreel-poll-body").height();t(".b-picreel-poll-wrapper").css("height",r+e+"px"),d(1)},50):setTimeout(function(){var r=parseInt(t(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(t(".b-picreel-poll-wrapper").css("padding-bottom")),o=t(e).width()>768&&t(".picreel-poll-body").height()<=500?500-r:t(".picreel-poll-body").height();t(e).height()-r-35<o?(t(".b-picreel-poll-wrapper").css("height",t(e).height()-35+"px"),d(0)):(t(".b-picreel-poll-wrapper").css("height",o+r+"px"),d(1))},50),!0===o.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},e.location.protocol+"//"+e.location.hostname+"/user/intro/campaigns"),!1===o.isPreviewMode&&g(),r.tracker.setVisited(),!0===n&&console.log("poll | insertPoll()")}var g=function(){f(b(l.dataUrl,i))},f=function(e){var t;(t=document.createElement("iframe")).style.display="none",t.style.width="0px",t.style.height="0px",t.src=e,document.body.appendChild(t)},b=function(e,t){for(var r in t)t[r]=encodeURIComponent(t[r]);return e+="?user_data%5BsourceUrl%5D="+t.sourceUrl+"&user_data%5BsourceHost%5D="+t.sourceHost+"&user_data%5BcookieEnabled%5D="+t.cookieEnabled+"&user_data%5BdoNotTrack%5D="+t.doNotTrack+"&user_data%5Blanguage%5D="+t.language+"&user_data%5BuserAgent%5D="+t.userAgent+"&user_data%5BscreenWight%5D="+t.screenWidth+"&user_data%5BscreenHeight%5D="+t.screenHeight+"&user_data%5BtemplateId%5D="+t.passedTemplates+"&user_data%5BcampaignId%5D="+o.pollId+"&user_data%5Breferrer%5D="+t.referrer+"&user_data%5BcurrentTemplate%5D="+t.currentTemplate+"&user_data%5Bret%5D="+t.isReturning};function h(i){var l,c;if(o.isPreviewMode&&i)l=s[0];else if((c=r.tracker.poll.getLastPassed()).goTo)l=function(e){for(var t=null,r=0;r<s.length;r++)if(s[r].id==e){t=s[r];break}!0===n&&console.log("poll | findQuestionById()",{questionId:e,questionFound:t});return t}(c.goTo);else{if(c.questionId)return _(),!1;l=s[0]}if(!l)return console.error("insertQuestion: failed to find next question",c),v(),!1;if(!o.isPreviewMode&&i&&"end"===l.type)return v(),!1;if(!0===n&&console.log("poll | insertQuestion()",{questionToInsert:l}),p.previousQuestion=p.currentQuestion,p.currentQuestion=l,"end"===l.type&&r.tracker.poll.setPassed(o.pollId),o.animation&&"none"!==o.animation&&!i)switch(o.animation){case"slideLeft":case"slideRight":a.questionsWrapper.append(l.$el).stop(!0,!0).animate({left:"slideLeft"===o.animation?-1*l.$el.outerWidth():l.$el.outerWidth()},700,function(){t(this).css("left",0),p.previousQuestion.$el.detach()});break;case"fade":a.questionsWrapper.append(l.$el).stop(!0,!0).css("height",l.$el.height()-1),p.previousQuestion.$el.detach(),l.$el.css("display","none").appendTo(a.questionsWrapper).fadeIn(500,function(){a.questionsWrapper.css("height","auto")})}else i?a.questionsWrapper.empty():p.previousQuestion.$el.detach(),a.questionsWrapper.append(l.$el);return!0===n&&console.log("poll | insertButton()"),a.buttonWrapper.html(p.currentQuestion.generateButton()),i||o.isOneQuestion||o.noResizeSurvey?o.noResizeSurvey&&setTimeout(function(){var r=parseInt(t(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(t(".b-picreel-poll-wrapper").css("padding-bottom")),i=t(".picreel-poll-body").height()<=500?500-r:t(".picreel-poll-body").height();t(".b-picreel-poll-wrapper").css("height",i+r+"px"),!0===o.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},e.location.protocol+"//"+e.location.hostname+"/user/intro/campaigns")},50):setTimeout(function(){var r=parseInt(t(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(t(".b-picreel-poll-wrapper").css("padding-bottom")),i=t(e).width()>768&&t(".picreel-poll-body").height()<=500?500-r:t(".picreel-poll-body").height();t(e).width()<768&&t(e).height()-r-35<i?(t(".b-picreel-poll-wrapper").css("height",t(e).height()-35+"px"),d(0)):(t(".b-picreel-poll-wrapper").css("height",i+r+"px"),d(1)),!0===o.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},e.location.protocol+"//"+e.location.hostname+"/user/intro/campaigns")},50),!0}function y(){!0===n&&console.log("poll | endPoll()"),r.tracker.poll.setPassed(o.pollId),!0===o.isPreviewMode&&(P(o.pollId),"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:remove_frame"},e.location.protocol+"//"+e.location.hostname+"/user/intro/campaigns")),v()}function w(){if("popup"===o.showOptions.position||"fullscreen"===o.showOptions.position)var e='<div class="picreel-poll-copywrite"'+(o.showOptions.hideCopywrite?'style="display:none;"':"")+'><a class="picreel-poll-copywrite-link" href="http://www.picreel.com/?utm_source='+i.sourceHost+'&utm_medium=survey&utm_campaign=copyright" '+("fullscreen"===o.showOptions.position?'style="color:'+o.styling.colors.wrapper.text+';"':"")+">Powered by <span>Picreel</span>"+("fullscreen"===o.showOptions.position?unescape("%u2122"):"")+"</a></div>";else e='<div class="picreel-poll-copywrite"><a class="picreel-poll-copywrite-link" href="http://www.picreel.com/?utm_source='+i.sourceHost+'&utm_medium=survey&utm_campaign=copyright">Not using <span>Picreel</span> yet?</a></div>';return!0===n&&console.log("poll | generateCopywrite()",{copywriteTemplate:e}),e}function v(){p.inserted&&a.el.remove(),o=i=void 0,a={},s=[],p={},t(e).off("resize.picreel-poll"),!0===n&&console.log("poll.destroyPoll()")}function k(){p.shown=!0,a.el.addClass("picreel-poll-wrapper-opened").removeClass("picreel-poll-wrapper-closed"),!0===n&&console.log("poll.openPoll()")}function _(){p.shown=!1,a.el.removeClass("picreel-poll-wrapper-opened").addClass("picreel-poll-wrapper-closed"),"popup"!==o.showOptions.position&&"fullscreen"!==o.showOptions.position||(a.backdrop.hide(),y()),!0===n&&console.log("poll.closePoll()")}function x(){p.shown?_():k()}function T(){!0===n&&console.log("poll.loadNextQuestion()"),h()}function P(e){r.tracker.poll.clearPollCookies(e)}return{reInit:function(e){!0===n&&console.log("poll.reInitPoll()"),v(),c(e)},isShown:function(){return p.shown},open:k,close:_,toggle:x,destroy:v,nextQuestion:T,init:c}}()}(window),function(e){"use strict";var t,r=e.picreel=e.picreel||{};r.Tab=function(){var o,i,n,a=r.config.getUrls();function s(){return void 0!==o&&"undefined"!==o.style&&"0"!=o.style&&"none"!==o.style&&void 0!==n}function l(){1==s()&&"block"==n.css("display")&&n.hide()}return{init:function(s){t=e.picreel.jQuery||e.jQuery,s&&(o=s),"none"!=o.style&&(p=o.position.split(","),i='<div id="picreel-tab-container" class="picreel-tab-container picreel-'+o.style+" picreel-"+p[0]+" picreel-"+p[1]+'" '+("bar"==o.style?'style="background-color:'+o.bgColor+'";':"")+'><div class="picreel-tab picreel-image-'+o.image_size+'" style="color:'+o.textColor+";"+("corner"==o.style?"background:linear-gradient("+{bottom:"-45deg",top:"135deg"}[p[0]]+", rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 50%, "+o.bgColor+" 50%, "+o.bgColor+" 100%);":"")+("image"==o.style&&""!=o.image_url?"background-image:url("+o.image_url+");":"")+'">',"corner"==o.style?i+='<div class="picreel-tab-text">'+o.text+'</div><div class="picreel-caret" style="border-'+p[0]+"-color:"+o.textColor+'"></div>':"image"==o.style?i+='<div class="picreel-image-text-container"><div class="picreel-image-text-wrapper"><span class="picreel-image-text">'+o.text+"</span></div></div>":"bar"==o.style&&(i+='<div class="picreel-tab-text">'+o.text+"</div>"),i+="</div>","bar"==o.style&&(i+='<div class="picreel-close-x">&times;</div>'),i+="</div>",n=t(i),t(document).on("click","#picreel-tab-container",function(e){e.preventDefault(),l(),picreel.Popup.render.showPopup(!0)}),t(document).on("click","#picreel-tab-container .picreel-close-x",function(e){e.preventDefault(),e.stopPropagation(),l(),picreel.Popup.render.hidePopup()}),n.hide().prependTo("body"),r.utils.loadStyles(a.styles.tab,function(){n.show()}));var p},hide:l,show:function(){1==s()&&"none"==n.css("display")&&n.show()},destroy:function(){void 0!==n&&n.remove()}}}()}(window),function(e){"use strict";var t=e.picreel=e.picreel||{};t.Popup=function(){var r=t.config.isDebug(),o=!1,i=0,n=!1,a=!0,s=!1,l=!1,p=5,c=0,u=0,d="",m=3;e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:""));var g,f,b=86400,h={iframe:null,closeFrame:document.createElement("a"),backdrop:document.createElement("div"),poweredLink:document.createElement("p"),poweredLinkSpan:document.createElement("span"),poweredLinkA:document.createElement("a"),subscribePopup:document.createElement("div"),closeSubscribePopup:document.createElement("a")},y=t.config.getUrls();function w(o){var i=0,n=o||f.showType;d+=n+" ";var a=f.timeToWait?f.timeToWait:0;switch(!0===r&&console.log("Trigger type: ",n),n){case"exit":setTimeout(function(){picreel.utils.addEvent(e,"mouseout",l)},1e3*+a);break;case"timed":setTimeout(function(){v.showPopup(!1)},1e3*+f.showValue);break;case"scroll":case"scrollup":setTimeout(function(){picreel.utils.addEvent(e,"scroll",s)},1e3*+a);break;case"both":setTimeout(function(){w("exit"),w("timed")},1e3*+a)}function s(r){console.log("p.utils.getScrollPercentage = "+t.utils.getScrollPercentage());var o=e.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop||0;if(!(Math.abs(c-o)<=p)){u=o>c?1:-1,c=o;var n=f.showValue||0==+f.showValue?+f.showValue:height/2-winH/2;i&&clearTimeout(i),console.log("scrollDir = "+u),console.log("scroll = "+(d.indexOf("scroll ")>=0)),console.log("scrollup = "+(d.indexOf("scrollup ")>=0)),console.log("breakpoint = "+n),i=setTimeout(function(){(d.indexOf("scroll ")>=0&&1==u&&t.utils.getScrollPercentage()>n||d.indexOf("scrollup ")>=0&&-1==u&&t.utils.getScrollPercentage()<n)&&(t.utils.removeEvent(e,"scroll",s),v.showPopup(!1))},200)}}function l(o){var i=o.toElement||o.relatedTarget;!0===r&&console.log("mouseout: ",i+" "+o.clientY),null===i&&o.clientY<20&&"none"==h.iframe.style.display&&(t.utils.removeEvent(e,"mouseout",l),v.showPopup(!1))}}var v={centerPopupFrame:function(){var e=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight;e+r<t.utils.documentHeight()&&(1==f.isFullScreen?h.iframe.style.top=e+"px":(h.iframe.style.top=e+r/2-h.iframe.offsetHeight/2+"px",h.poweredLinkSpan.style.top=e+r/2+h.iframe.offsetHeight/2+8+"px"),h.closeFrame.style.top=e+r/2-h.iframe.offsetHeight/2-12+"px",h.closeFrame.style.marginLeft=h.iframe.offsetWidth/2-13+"px")},styleIframe:function(){h.iframe.className="frame-container picreel-element",h.iframe.frameBorder="0",h.iframe.style.position="fixed",h.iframe.style.left="50%",h.iframe.style.top="50%",h.iframe.style.marginLeft="-400px",h.iframe.style.marginTop="-250px",h.iframe.style.zIndex=2147483641,h.iframe.style.display="none",h.iframe.style.width="800px",h.iframe.style.height="500px",1==f.isMobile&&1!=l&&(h.iframe.style.position="absolute",h.iframe.style.marginTop="auto")},appendBackdrop:function(){if(h.backdrop.id="backdrop-container",h.backdrop.className="frame-container picreel-element",h.backdrop.style.display="none",h.backdrop.style.position="fixed",h.backdrop.style.backgroundColor="rgba(0,0,0,0.9)",h.backdrop.style.bottom="0",h.backdrop.style.left="0",h.backdrop.style.right="0",h.backdrop.style.top="0",h.backdrop.style.zIndex=2147483640,h.backdrop.style.opacity=1,1==f.isMobile&&1!=l){h.backdrop.style.position="absolute",h.backdrop.style.width="100%";var e=t.utils.documentHeight();h.backdrop.style.height=e+"px"}document.body.appendChild(h.backdrop)},appendCloseFrame:function(){h.closeFrame.id="close-frame",h.closeFrame.className="frame-container picreel-element",h.closeFrame.style.position="fixed",h.closeFrame.style.left="50%",h.closeFrame.style.top="50%",h.closeFrame.style.marginLeft="387px",h.closeFrame.style.marginTop="-260px",h.closeFrame.style.display="none",h.closeFrame.style.width="24px",h.closeFrame.style.height="24px",h.closeFrame.style.zIndex=2147483642,h.closeFrame.style.color="#000",h.closeFrame.style.textDecoration="none",h.closeFrame.style.cursor="pointer",h.closeFrame.style.opacity="1",h.closeFrame.style.background='url("'+y.s3+'img/close.png") no-repeat scroll 0% 0% transparent',1==f.isMobile&&1!=l&&(h.closeFrame.style.position="absolute",h.closeFrame.style.marginTop="0"),h.closeFrame.onclick=function(){v.hidePopup(),picreel.Tab.show(),picreel.tracker.popup.getConnectedPopupTemplateIdRB()==g.currentTemplate&&(picreel.tracker.popup.setReminderbarTypeToShow(1),picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,1));var e=picreel.tracker.popup.getReminderbarId();(!picreel.tracker.popup.isReminderbarPassed(e)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"true"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&(console.log("close_popup: do runReminderbar"),t.gate.runReminderbar(f.isMobile))},document.body.appendChild(h.closeFrame)},appendPoweredLink:function(){h.poweredLink.id="picreel-powered-container",h.poweredLink.className="picreel-element",h.poweredLink.style.display="none",h.poweredLinkSpan.id="picreel-powered-link",h.poweredLinkSpan.className="picreel-element",h.poweredLinkSpan.style.zIndex=2147483647,h.poweredLinkSpan.style.position="fixed",h.poweredLinkSpan.style.left="20px",h.poweredLinkSpan.style.bottom="20px",h.poweredLinkSpan.style.color="#fff",h.poweredLinkSpan.style.textDecoration="none",h.poweredLinkSpan.style.fontFamily='"Segoe UI","Open Sans","Helvetica Neue",Helvetica, Arial',h.poweredLinkSpan.style.fontSize="15px",h.poweredLinkSpan.style.left="50%",h.poweredLinkSpan.style.top="50%",h.poweredLinkSpan.style.bottom="auto",h.poweredLinkSpan.style.marginTop="266px",h.poweredLinkSpan.style.width="800px",h.poweredLinkSpan.style.textAlign="left",h.poweredLinkSpan.style.marginLeft="-400px",h.poweredLinkSpan.style.fontWeight="400",h.poweredLinkSpan.style.color="rgb(200, 200, 200)",h.poweredLinkSpan.style.fontSize="12px",h.poweredLinkSpan.style.textTransform="none",h.poweredLinkA.style.textAlign="left",h.poweredLinkA.style.fontWeight="400",h.poweredLinkA.style.color="rgb(200, 200, 200)",h.poweredLinkA.style.fontSize="12px",h.poweredLinkA.style.textTransform="none",(g.sourceHost.indexOf("countryoutfitter.life")>=0||g.sourceHost.indexOf("countryoutfitter.com")>=0)&&(h.poweredLinkSpan.style.color="rgb(80, 80, 80)",h.poweredLinkA.style.color="rgb(80, 80, 80)"),(g.sourceHost.indexOf("3dcart.com")>=0||g.sourceHost.indexOf("guidetoiceland.is")>=0)&&(h.poweredLinkSpan.style.color="rgb(225, 225, 225)",h.poweredLinkA.style.color="rgb(225, 225, 225)"),(g.sourceHost.indexOf("onagofly.com")>=0||g.sourceHost.indexOf("cashola.com")>=0||g.sourceHost.indexOf("postcron.com")>=0)&&(h.poweredLinkSpan.style.color="rgb(240, 240, 240)",h.poweredLinkA.style.color="rgb(240, 240, 240)"),h.poweredLinkA.href="http://www.picreel.com/?utm_source="+g.sourceHost+"&utm_medium=popup&utm_campaign=copyright",h.poweredLinkA.target="_blank",t.utils.setText(h.poweredLinkA,"Picreel"),h.poweredLinkA.style.padding="5px 1px 5px 5px",h.poweredLinkA.style.textDecoration="underline",t.utils.setText(h.poweredLinkSpan,"Powered by"),h.poweredLinkSpan.appendChild(h.poweredLinkA),h.poweredLink.appendChild(h.poweredLinkSpan),-1==g.sourceHost.indexOf("roveconcepts.com")&&document.body.appendChild(h.poweredLink)},appendSubscribePopup:function(){h.subscribePopup.id="subscribe-popup",h.subscribePopup.className="picreel-element",h.subscribePopup.style.position="fixed",h.subscribePopup.style.width="98%",h.subscribePopup.style.height="50px",h.subscribePopup.style.marginLeft="0",h.subscribePopup.style.left="0",h.subscribePopup.style.top="40%",h.subscribePopup.style.zIndex=2147483641,h.subscribePopup.style.display="none",t.utils.setText(h.subscribePopup,"Thank you for subscribing"),h.subscribePopup.style.align="center",h.subscribePopup.style.fontSize="36px",h.subscribePopup.style.lineHeight="36px",h.subscribePopup.style.fontWeight="bold",h.subscribePopup.style.color="#fff",h.subscribePopup.style.textAlign="center",h.subscribePopup.style.textTransform="none",document.body.appendChild(h.subscribePopup)},appendCloseSubscribePopup:function(){h.closeSubscribePopup.id="close-subscribe-popup",h.closeSubscribePopup.className="picreel-element",h.closeSubscribePopup.style.position="fixed",h.closeSubscribePopup.style.width="30px",h.closeSubscribePopup.style.height="30px",h.closeSubscribePopup.style.marginLeft="0",h.closeSubscribePopup.style.right="3%",h.closeSubscribePopup.style.top="26%",h.closeSubscribePopup.style.bottom="auto",h.closeSubscribePopup.style.zIndex=2147483642,h.closeSubscribePopup.style.display="none",h.closeSubscribePopup.style.lineHeight="30px",h.closeSubscribePopup.style.color="transparent",h.closeSubscribePopup.style.textDecoration="none",h.closeSubscribePopup.style.cursor="pointer",h.closeSubscribePopup.style.opacity="0.8",h.closeSubscribePopup.style.background='url("https://system.picreel.com/img/theme_images/9b8a3cc8450b8cb1f0ac930e4f0889bb373b9f25.png") no-repeat scroll 0% 0% transparent',document.body.appendChild(h.closeSubscribePopup),h.closeSubscribePopup.onclick=function(){v.hideSubscribePopup()}},hidePoweredFrame:function(){n=!0,h.poweredLink.style.display="none"},hideSubscribePopup:function(){h.closeSubscribePopup.style.display="none",h.subscribePopup.style.display="none",h.backdrop.style.display="none",h.poweredLink.style.display="none"},hideCloseFrame:function(){o=!0,h.closeFrame.style.display="none"},showSubscribePopup:function(e){""!=e?(t.utils.setText(h.subscribePopup,e),v.hidePopup(),h.subscribePopup.style.display="block",h.backdrop.style.display="block",s&&(h.closeSubscribePopup.style.display="block"),h.poweredLink.style.display=n?"none":"block",i?setTimeout(v.hideSubscribePopup,i):setTimeout(v.hideSubscribePopup,2e3)):v.hidePopup()},showPopup:function(r){if(!a){if(!0===r||!t.tracker.popup.isPassed(g.currentTemplate)&&!t.tracker.popup.isTemplatePassed(g.currentTemplate)){t.tracker.popup.setViewed(g.currentTemplate),h.iframe.style.display="block",o||(h.closeFrame.style.display="block"),h.backdrop.style.display="block",n||1==l||(h.poweredLink.style.display="block"),T(),picreel.Tab.hide(),k(),P("getCookieNames"),P("screen_size",'{"height":"'+e.outerHeight+'","width":"'+e.outerWidth+'"}');var i={};if(null!==document.getElementById("picreellistname")&&(i.picreellistname=document.getElementById("picreellistname").value),null!==document.getElementById("picreeltracking")&&(i.picreeltracking=document.getElementById("picreeltracking").value),document.getElementsByClassName("picreel-popup-data").length>0){for(var s=document.getElementsByClassName("picreel-popup-data"),p=0;p<s.length;p++)console.log(s[p]),void 0!==s[p].value&&""!==s[p].id&&void 0!==s[p].value&&(i[s[p].id]=s[p].value);console.log(i)}i&&P("picreel_track_data",i)}1==f.isMobile&&1!=l&&(1!=f.isFullScreen&&(h.poweredLinkSpan.style.position="absolute",h.poweredLinkSpan.style.marginTop="auto"),e.onscroll=v.centerPopupFrame,e.onresize=v.centerPopupFrame,v.centerPopupFrame())}},addHiddingPopupCookies:function(){var e=t.utils.getLocationPath();t.tracker.popup.setPassed(g.currentTemplate,b,e),t.tracker.popup.setTemplatePassed(g.currentTemplate,b),g.passedTemplates?g.passedTemplates+=","+g.currentTemplate:g.passedTemplates=g.currentTemplate},hidePopup:function(){var e=picreel.tracker.popup.getReminderbarId();console.log("hidePopup: reminderbarId",e),console.log("hidePopup: isReminderbarPassed",picreel.tracker.popup.isReminderbarPassed(e)),console.log("hidePopup: is getReminderbarIsTrigger",picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate)),e&&!picreel.tracker.popup.isReminderbarPassed(e)&&"false"!=picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate)||(t.utils.cookies.removeItem("picreel_reminderbar__trigger_popup_"+g.currentTemplate),t.utils.cookies.removeItem("picreel_reminderbar__is_trigger_"+g.currentTemplate),t.utils.cookies.removeItem("picreel_reminderbar__show_popup_"+g.currentTemplate),v.addHiddingPopupCookies()),h.iframe.style.display="none",h.closeFrame.style.display="none",h.backdrop.style.display="none",h.poweredLink.style.display="none"}},k=function(){_(x(y.dataUrl,g))};var _=function(e){var t;(t=document.createElement("iframe")).style.display="none",t.style.width="0px",t.style.height="0px",t.src=e,document.body.appendChild(t)},x=function(e,t){for(var r in t)t[r]=encodeURIComponent(t[r]);return e+="?user_data%5BsourceUrl%5D="+t.sourceUrl+"&user_data%5BsourceHost%5D="+t.sourceHost+"&user_data%5BcookieEnabled%5D="+t.cookieEnabled+"&user_data%5BdoNotTrack%5D="+t.doNotTrack+"&user_data%5Blanguage%5D="+t.language+"&user_data%5BuserAgent%5D="+t.userAgent+"&user_data%5BscreenWight%5D="+t.screenWidth+"&user_data%5BscreenHeight%5D="+t.screenHeight+"&user_data%5BtemplateId%5D="+t.passedTemplates+"&user_data%5BcampaignId%5D="+t.campaignId+"&user_data%5Breferrer%5D="+t.referrer+"&user_data%5BcurrentTemplate%5D="+t.currentTemplate+"&user_data%5Bret%5D="+t.isReturning},T=function(){document.getElementById("picreel-frame").contentWindow.postMessage("showPopup","*")},P=function(e,t){document.getElementById("picreel-frame").contentWindow.postMessage({message:e,params:t},"*")},I=function(e){var t;if(document.createEvent?(t=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(t=document.createEventObject()).eventType=e,t.eventName=e,document.createEvent)document.dispatchEvent(t);else try{document.fireEvent("on"+e,t)}catch(e){}},S=function(e){var t,r;try{t=e.params.match(/width["']?:["']?(\d+)/)[1],r=e.params.match(/height["']?:["']?(\d+)/)[1]}catch(e){t="auto",r="auto"}h.iframe.style.width=t+"px",h.iframe.style.height=r+"px",h.iframe.style.marginLeft="-"+t/2+"px",h.closeFrame.style.marginLeft=t/2-13+"px",1!=f.isMobile&&(h.iframe.style.marginTop="-"+r/2+"px",h.closeFrame.style.marginTop="-"+(r/2+10)+"px"),h.poweredLinkSpan.style.marginTop=+r/2+8+"px",h.poweredLinkSpan.style.marginLeft="-"+ +t/2+"px",h.poweredLinkSpan.style.width=t+"px"};function C(){try{document.getElementById("picreel-frame").contentWindow.postMessage({message:"popupInitialized"},"*"),"undefined"!=typeof PCD&&PCD.receiveMessage(function(r){var o=picreel.tracker.popup.getReminderbarId();if(void 0!==r.message)switch(r.message){case"close_popup":void 0!==r.params&&"do-action"==r.params&&I("picreel_do_action"),picreel.Tab.show(),picreel.tracker.popup.getConnectedPopupTemplateIdRB()==g.currentTemplate&&(picreel.tracker.popup.setReminderbarTypeToShow(1),picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,1),t.tracker.popup.setOnlyReminderbarTrigger(g.currentTemplate,b)),v.hidePopup(),(!picreel.tracker.popup.isReminderbarPassed(o)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"true"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&(console.log("close_popup: do runReminderbar"),t.gate.runReminderbar(f.isMobile)),I("picreelClosePopup");break;case"close_popup_no_cookie":h.iframe.style.display="none",h.closeFrame.style.display="none",h.backdrop.style.display="none",h.poweredLink.style.display="none",picreel.Tab.show();break;case"hide_close_frame":v.hideCloseFrame();break;case"hide_powered_link":v.hidePoweredFrame();break;case"current_campaign":g.campaignId=r.params;break;case"current_template":g.currentTemplate=r.params,a=!1,t.tracker.popup.isTemplatePassed(g.currentTemplate)&&v.hidePopup();break;case"close_after_submit":picreel.Tab.destroy(),picreel.tracker.popup.getConnectedPopupTemplateIdRB()!=g.currentTemplate||picreel.tracker.popup.isReminderbarPassed(o)||(picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,0),picreel.tracker.popup.setReminderbarTypeToShow(0),picreel.tracker.popup.setReminderbarIsTrigger(g.currentTemplate,!1)),v.showSubscribePopup(r.params),(!picreel.tracker.popup.isReminderbarPassed(o)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"false"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&t.gate.runReminderbar(f.isMobile),I("picreelSubmitPopup");break;case"copy_to_clipboard":t.utils.setText(h.subscribePopup,"Coupon copied to your clipboard"),h.subscribePopup.style.width="600px",h.subscribePopup.style.marginLeft="-250px",v.showSubscribePopup();break;case"redirect":picreel.tracker.popup.getConnectedPopupTemplateIdRB()!=g.currentTemplate||picreel.tracker.popup.isReminderbarPassed(o)||(picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,0),picreel.tracker.popup.setReminderbarTypeToShow(0),picreel.tracker.popup.setReminderbarIsTrigger(g.currentTemplate,!1)),picreel.Tab.destroy(),v.hidePopup(),(!picreel.tracker.popup.isReminderbarPassed(o)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"false"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&t.gate.runReminderbar(f.isMobile),I("picreelRedirectPopup"),/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#()]*[\w\-\@?^=%&amp;\/~\+#()])?$/gi.test(r.params)&&(location.href=r.params);break;case"only_redirect":I("picreelRedirectPopup"),console.log("only_redirect",r.params),/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#()]*[\w\-\@?^=%&amp;\/~\+#()])?$/gi.test(r.params)&&(location.href=r.params);break;case"show_popup":v.showPopup(!1);break;case"set_expire_time":b=parseInt(r.params);break;case"cookie_after_submit":picreel.tracker.popup.getConnectedPopupTemplateIdRB()==g.currentTemplate&&(picreel.tracker.popup.setReminderbarTypeToShow(0),picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,0),picreel.utils.cookies.removeItem("picreel_reminderbar__is_trigger_"+g.currentTemplate),picreel.utils.cookies.removeItem("picreel_reminderbar__trigger_popup_"+g.currentTemplate)),picreel.Tab.destroy(),I("picreelSubmitPopup");break;case"cookieNames":for(var n=r.params.split(","),p={},c=0;c<n.length;c++)"breadcrumbs"==n[c]?p[n[c]]=document.location.href:p[n[c]]=picreel.utils.cookies.getItem(n[c]);p&&P("cookieValues",p);break;case"popupTimeout":i=parseInt(r.params);break;case"wrap_background":h.backdrop.style.background=r.params;break;case"wrap_text_color":h.subscribePopup.style.color=r.params;break;case"poweredlink_text_color":h.poweredLinkA.style.color=r.params;break;case"wrap_click_close":h.backdrop.onclick=function(){v.hidePopup()};break;case"popup_size":S(r);break;case"full_width_template":h.iframe.style.left="0",h.iframe.style.top="0",h.iframe.style.marginLeft="0",h.iframe.style.marginTop="0",h.iframe.style.zIndex=2147483641,h.iframe.style.display="none",h.iframe.style.width="100%",h.iframe.style.height="100%",h.poweredLink.style.display="none",h.poweredLinkSpan.style.position="fixed",h.poweredLinkSpan.style.left="20px",h.poweredLinkSpan.style.bottom="20px",h.poweredLinkSpan.style.color="#fff",h.poweredLinkSpan.style.textDecoration="none",h.poweredLinkSpan.style.fontFamily='"Segoe UI","Open Sans","Helvetica Neue",Helvetica, Arial',h.poweredLinkSpan.style.fontSize="15px",h.poweredLinkSpan.style.top="auto",h.poweredLinkSpan.style.marginTop="0",h.poweredLinkSpan.style.width="auto",h.poweredLinkSpan.style.marginLeft="0",h.poweredLinkSpan.style.fontWeight="400",h.poweredLinkA.style.color="#fff",h.poweredLinkA.style.fontSize="15px",h.poweredLinkA.href="http://www.picreel.com/?utm_source="+g.sourceHost+"&utm_medium=popup&utm_campaign=copyright",h.poweredLinkA.target="_blank",t.utils.setText(h.poweredLinkA,"Picreel"),h.poweredLinkA.style.padding="5px 1px 5px 5px",h.poweredLinkA.style.textDecoration="underline",h.poweredLinkSpan.appendChild(h.poweredLinkA),h.poweredLink.appendChild(h.poweredLinkSpan);break;case"do_custom_action":void 0!==r.params&&(e.picreel_email=r.params,I("picreel_do_action"));case"close_message_btn":s=!0;break;case"corner_popup":var u,d,m;try{u=parseInt(r.params.match(/width["']?:["']?(\d+)/)[1]),d=parseInt(r.params.match(/height["']?:["']?(\d+)/)[1]),m=r.params.match(/\[(\w+)\]/)[1]}catch(e){u="auto",d="auto",m="br"}1!=f.isMobile||1==f.isMobile&&1==l?(console.log("corner - "+m),h.backdrop.style.bottom="auto",h.backdrop.style.right="auto",h.backdrop.style.opacity=0,h.backdrop.style.width="0px",h.backdrop.style.height="0px",h.subscribePopup.style.width="0",h.subscribePopup.style.height="0",h.subscribePopup.style.left="0",h.subscribePopup.style.top="0",h.subscribePopup.style.bottom="auto",h.subscribePopup.style.right="auto",h.subscribePopup.style.opacity=0,h.closeSubscribePopup.style.width="0",h.closeSubscribePopup.style.height="0",h.closeSubscribePopup.style.left="0",h.closeSubscribePopup.style.top="0",h.closeSubscribePopup.style.bottom="auto",h.closeSubscribePopup.style.right="auto",h.closeSubscribePopup.style.opacity=0,h.iframe.style.left="auto",h.iframe.style.top="auto",h.iframe.style.right="auto",h.iframe.style.bottom="auto",h.iframe.style.marginLeft="0",h.iframe.style.marginTop="0",h.closeFrame.style.left="auto",h.closeFrame.style.top="auto",h.closeFrame.style.right="auto",h.closeFrame.style.bottom="auto",h.closeFrame.style.marginLeft="0",h.closeFrame.style.marginTop="0",h.poweredLinkSpan.style.left="auto",h.poweredLinkSpan.style.top="auto",h.poweredLinkSpan.style.right="auto",h.poweredLinkSpan.style.bottom="auto",h.poweredLinkSpan.style.marginLeft="0",h.poweredLinkSpan.style.marginTop="0",h.poweredLinkSpan.style.width="auto",1==l&&(h.iframe.style.position="fixed",h.closeFrame.style.position="fixed"),"br"==m?(h.iframe.style.right="7px",h.iframe.style.bottom="7px",h.poweredLinkSpan.style.right="7px",h.poweredLinkSpan.style.bottom=d+7+"px",h.closeFrame.style.right=u-13+"px",h.closeFrame.style.bottom=d-13+"px"):"bl"==m?(h.iframe.style.left="7px",h.iframe.style.bottom="7px",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.bottom=d+7+"px",h.closeFrame.style.left=u-13+"px",h.closeFrame.style.bottom=d-13+"px"):"tr"==m?(h.iframe.style.right="7px",h.iframe.style.top="7px",h.poweredLinkSpan.style.right="7px",h.poweredLinkSpan.style.top=d+7+"px",h.closeFrame.style.right=u-13+"px",h.closeFrame.style.top=d-13+"px"):"tl"==m?(h.iframe.style.left="7px",h.iframe.style.top="7px",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.top=d+7+"px",h.closeFrame.style.left=u-13+"px",h.closeFrame.style.top=d-13+"px"):"cr"==m?(h.iframe.style.right="7px",h.iframe.style.top="50%",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.top=d+7+"px",h.iframe.style.marginTop="-"+d/2+"px",h.closeFrame.style.marginTop="-"+(d/2+10)+"px",h.closeFrame.style.right=u-10+"px",h.closeFrame.style.top="50%"):"cl"==m?(h.iframe.style.left="7px",h.iframe.style.top="50%",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.top=d+7+"px",h.iframe.style.marginTop="-"+d/2+"px",h.closeFrame.style.marginTop="-"+(d/2+10)+"px",h.closeFrame.style.left=u-10+"px",h.closeFrame.style.top="50%"):"tc"==m?(h.iframe.style.marginLeft="-"+u/2+"px",h.iframe.style.top="7px",h.iframe.style.left="50%",h.poweredLinkSpan.style.marginLeft="-"+u/2+"px",h.poweredLinkSpan.style.top=d+7+"px",h.poweredLinkSpan.style.left="50%",h.closeFrame.style.marginLeft=u/2-13+"px",h.closeFrame.style.top=d-13+"px",h.closeFrame.style.left="50%"):"bc"==m&&(h.iframe.style.marginLeft="-"+u/2+"px",h.iframe.style.bottom="7px",h.iframe.style.left="50%",h.poweredLinkSpan.style.marginLeft="-"+u/2+"px",h.poweredLinkSpan.style.bottom=d+7+"px",h.poweredLinkSpan.style.left="50%",h.closeFrame.style.marginLeft=u/2-13+"px",h.closeFrame.style.bottom=d-13+"px",h.closeFrame.style.left="50%"),h.iframe.style.width=u+"px",h.iframe.style.height=d+"px"):S(r);break;case"mobile_corner":console.log('case "mobile_corner"'),l=!0;break;case"replace_data":var y=r.params.split(",");p={};y.forEach(function(e,t,r){var o=document.querySelector(e);p[e]=null!==o?o.innerHTML||o.value:""}),P("replaced_data",p);break;case"show_alert":picreel.utils.customAlert(r.params)}})}catch(e){}}return{init:function(e,r){if(f=r,g=e.userData,h.iframe=e.iframe,!(f.viewsToShow&&+t.tracker.getPageView()<=+f.viewsToShow)){f.animation=f.animation?f.animation:"",v.styleIframe(),v.appendCloseFrame(),v.appendBackdrop(),v.appendSubscribePopup(),v.appendCloseSubscribePopup(),"string"==typeof f.animation&&""!==f.animation&&"none"!==f.animation&&(t.utils.loadStyles(t.config.getUrls().s3+"css/popup-animation.min.css"),h.iframe.className+=" picreel-animated picreel-animation-"+f.animation),C();var o=picreel.tracker.popup.getReminderbarId(),i=picreel.tracker.popup.getConnectedPopupTemplateIdRB();if(console.log("init: isReminderbarPassed",picreel.tracker.popup.isReminderbarPassed(o)),console.log("init: connectedReminderbarTemplateId",i),console.log("init: isOnlyReminderbarTrigger",picreel.tracker.popup.isOnlyReminderbarTrigger(i)),picreel.tracker.popup.isOnlyReminderbarTrigger(i)||("object"==typeof f.showType?setTimeout(function(){for(var e=0;e<f.showType.length;e++)f.showValue=f.showType[e].showValue,w(f.showType[e].showType)},1e3*m):f.showType&&setTimeout(function(){w()},1e3*m)),f.customShowTriggers)for(var n=0;n<f.customShowTriggers.length;n++){var a=document.querySelector(f.customShowTriggers[n].targetElement);null!==a&&picreel.utils.addEvent(a,f.customShowTriggers[n].triggerName,function(e){e.preventDefault(),v.showPopup(!0)})}"0"!=f.tabSettings.style&&"undefined"!==f.tabSettings.style&&"none"!==f.tabSettings.style&&picreel.utils.checkSupport("jquery",function(){picreel.Tab.init(f.tabSettings)})}},listen:C,render:v,setUserData:function(e){g=e},setCurrentTemplateId:function(e){g.currentTemplate=e},sendUserData:k,cookieSubmit:P}}()}(window),function(e){"use strict";var t,r=e.picreel=e.picreel||{};r.reminderBar=function(){var o,i,n,a,s=r.config.getUrls();function l(a){t=e.picreel.jQuery||e.jQuery,a&&(o=a);var l=!1;1==o.appearance.isTrigger&&1==picreel.tracker.popup.getReminderbarShowPopup(o.popup_template_id)&&(l=!0),d(l),(n=t(i)).find(".picreel-reminderbar-close-button").on("click",function(e){e.preventDefault(),t(this).addClass("picreel-reminderbar-close-button-hide"),setTimeout(function(){u(!0)},200)}),n.find(".picreel-reminderbar-button:not(#reminderbar-show-popup)").on("click",function(e){var r={},i=t(".picreel-reminderbar-input");switch(o.type){case"coupon":break;case"email":r.email=i.filter("[type=email]").val();break;case"emailAndName":r.name=i.filter("[type=text]").val(),r.email=i.filter("[type=email]").val()}picreel.utils.isEmail(r.email)?(function(e){var r={};r.tech_data=[{name:"base_url",value:"//app.picreel.com/"},{name:"subscribe_url",value:"http://app.picreel.com/api/subscribe"},{name:"action_url",value:"http://app.picreel.com/api/action"},{name:"editable",value:"1"},{name:"campaign_id",value:o.popup_campaign_id},{name:"request_url",value:location.href},{name:"hide_close_link",value:0},{name:"template_id",value:o.popup_template_id},{name:"timer",value:""},{name:"periodicity",value:86400},{name:"hide_powered_link",value:0},{name:"is_reminderbar",value:1}],r.custom_data=e,console.log(r),t.ajax({url:s.main+"api/subscribe_new",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:r,complete:function(){}})}(r),"coupon"!==o.type&&e.preventDefault(),setTimeout(function(){u(!0)},200)):i.filter("[type=email]").addClass("picreel-input-error").focus()}),n.find(".picreel-reminderbar-input").on("blur",function(){t(this).removeClass("picreel-input-error")}),t(document).on("click","#reminderbar-show-popup",function(e){e.preventDefault(),picreel.Popup.render.showPopup(!0),setTimeout(function(){u(!1)},200)}),n.hide().prependTo("body"),-1==r.utils.loadStyles(s.styles.reminderBar,function(){p(),o.appearance.autohide&&setTimeout(function(){u(!0)},1e3*parseInt(o.appearance.autohide))})&&p()}function p(){"timed"===o.appearance.showType?setTimeout(function(){c()},1e3*parseInt(o.appearance.showValue)):c()}function c(){n.show(),o.appearance.pushPage&&function(){var e="large"===o.styling.size?60:38;a=parseInt(t("body").css("paddingTop")),(a=isNaN(a)?0:a)&&(e+=a);t("body").animate({paddingTop:e},200)}()}function u(e){if(n.addClass("picreel-reminderbar-closed"),o.appearance.pushPage&&t("body").animate({paddingTop:a},200),1==e){picreel.tracker.popup.setReminderbarPassed(o.id);r.utils.getLocationPath();picreel.Popup.render.addHiddingPopupCookies()}}function d(e){var t=o.styling.addShadow?"picreel-reminderbar-with-shadow ":"";i='<div class="picreel-reminderbar picreel-reminderbar-position-'+o.appearance.position+" "+t+"picreel-reminderbar-attachment-"+o.appearance.attachment+" picreel-reminderbar-size-"+o.styling.size+'" style="background-color:'+o.styling.bg+"; color: "+o.styling.textColor+"; border-bottom-color: "+o.styling.border+'"><div class="picreel-reminderbar-content-wrapper">'+(1==e?function(){var e='<div class="picreel-reminderbar-content picreel-reminderbar-content-trigger"><div class="picreel-reminderbar-title" style="color:'+o.styling.textColor+';">'+o.data.triggerText+"</div>";return e+=function(){var e='<a id="reminderbar-show-popup" class="picreel-reminderbar-button picreel-reminderbar-button-style-button" style="background-color: '+o.styling.coupon.bg+"; color: "+o.styling.coupon.textColor+';" ';return e+="#",e+=">"+o.data.buttonTriggerText+"</a>"}(),e+="</div>"}():function(){var e='<div class="picreel-reminderbar-content"><div class="picreel-reminderbar-title" style="color:'+o.styling.textColor+';">'+o.data.text+"</div>";switch(o.type){case"coupon":e+=function(){var e='<div class="picreel-reminderbar-coupon-wrapper" style="background-color: '+o.styling.coupon.bg+';"><span class="picreel-reminderbar-coupon" style="color: '+o.styling.coupon.textColor+";border-color: "+o.styling.coupon.textColor+';" ';return e+=">"+o.data.couponText+"</span></div>"}();break;case"email":e+='<input type="email" class="picreel-reminderbar-input" placeholder="'+o.data.emailFieldPlaceholder+'">',e+=m();break;case"emailAndName":e+='<div class="picreel-reminderbar-inputs-wrapper">',e+='<input type="text" class="picreel-reminderbar-input" placeholder="'+o.data.nameFieldPlaceholder+'">',e+='<input type="email" class="picreel-reminderbar-input" placeholder="'+o.data.emailFieldPlaceholder+'">',e+="</div>",e+=m()}return e+="</div>"}())+"</div>"+function(){var e="";o.appearance.closable&&(e='<div class="picreel-reminderbar-close-button" style="color:'+o.styling.closeColor+'">&times;</div>');return e}()+"</div>"}function m(){var e=o.data.url?'href="'+o.data.url+'"':"",t=o.data.target?'target="'+o.data.target+'"':"",r='<a class="picreel-reminderbar-button picreel-reminderbar-button-style-button" style="background-color: '+o.styling.button.bg+"; color: "+o.styling.button.textColor+';" ';return r+=e+t,r+=">"+o.data.buttonText+"</a>"}function g(){void 0!==n&&n.remove()}return{init:l,reInit:function(e){g(),l(e)},destroyRB:g,initPreviewRB:function(r){t=e.picreel.jQuery||jQuery,void 0!==n&&g(),r&&(o=r),o.appearance.position="top",o.appearance.attachment="static",o.appearance.closable=!0;var a=!1;1==o.appearance.isPreviewTrigger&&(a=!0),d(a),(n=t(i)).hide().prependTo(".preview-container .preview"),t(document).trigger("reminderbar_loaded"),c()}}}()}(window),function(e){"use strict";var t,r=e.picreel=e.picreel||{};r.nanoBar=function(){var o,i,n,a,s=r.config.getUrls(),l=r.config.isDebug(),p=5,c=0,u=0,d="",m=3;e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:""));var g,f=86400;function b(a){t=e.picreel.jQuery||e.jQuery,a&&(o=a),(g=r.tracker.getUserData()).currentTemplate=o.id,g.campaignId=o.campaign_id,r.tracker.nanobar.isTemplatePassed(g.currentTemplate)||o.showOptions.viewsToShow&&+r.tracker.getPageView()<=+o.showOptions.viewsToShow||(r.utils.loadStyles(s.styles.nanoBar),k(),(n=t(i)).find(".picreel-nanobar-close-button").on("click",function(e){e.preventDefault(),t(this).addClass("picreel-nanobar-close-button-hide"),setTimeout(function(){v(!0)},200)}),n.find(".picreel-nanobar-button").on("click",function(e){var r={},i=t(".picreel-nanobar-input");switch(o.type){case"coupon":case"redirect":break;case"collect":switch(o.data.inputType){case"email":r.email=i.filter("[type=email]").val();break;case"phone":r.phone=i.filter("[type=tel]").val();break;case"emailName":r.name=i.filter("[type=text]").val(),r.email=i.filter("[type=email]").val();break;case"emailName":r.name=i.filter("[type=text]").val(),r.phone=i.filter("[type=tel]").val()}}null==r.email||picreel.utils.isEmail(r.email)?null==r.phone||picreel.utils.isPhone(r.phone)?("redirect"===o.type?(function(e){var r={campaign_id:o.campaign_id,template_id:o.id};t.ajax({url:s.main+"api/action",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:r,complete:function(){console.log("Picreel: User subscribed"),"function"==typeof e&&e()}})}(),"_self"===o.data.redirectTarget&&(e.preventDefault(),location.href=o.data.redirectUrl)):(e.preventDefault(),function(e){var r={};r.tech_data=[{name:"campaign_id",value:o.campaign_id},{name:"request_url",value:location.href},{name:"template_id",value:o.id},{name:"is_nanobar",value:1}],r.custom_data=e,t.ajax({url:s.main+"api/subscribe_new",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:{tech_data:JSON.stringify(r.tech_data),custom_data:JSON.stringify(r.custom_data)},complete:function(){console.log("Picreel: User subscribed")}})}(r)),setTimeout(function(){v(!0)},200)):i.filter("[type=tel]").addClass("picreel-input-error").focus():i.filter("[type=email]").addClass("picreel-input-error").focus()}),n.find(".picreel-nanobar-input").on("blur",function(){t(this).removeClass("picreel-input-error")}),n.hide().prependTo("body"),"object"==typeof o.showOptions.showType?setTimeout(function(){for(var e=0;e<o.showOptions.showType.length;e++)o.showOptions.showValue=o.showOptions.showType[e].showValue,h(o.showOptions.showType[e].showType)},1e3*m):o.showOptions.showType&&setTimeout(function(){h()},1e3*m))}function h(t){var i=0,a=t||o.showOptions.showType;d+=a+" ";var s=o.showOptions.timeToWait?o.showOptions.timeToWait:0;switch(!0===l&&console.log("Trigger type: ",a),a){case"exit":setTimeout(function(){picreel.utils.addEvent(e,"mouseout",g)},1e3*+s);break;case"timed":setTimeout(function(){y(!1)},1e3*+o.showOptions.showValue);break;case"scroll":case"scrollup":setTimeout(function(){picreel.utils.addEvent(e,"scroll",m)},1e3*+s);break;case"both":setTimeout(function(){h("exit"),h("timed")},1e3*+s)}function m(t){console.log("p.utils.getScrollPercentage = "+r.utils.getScrollPercentage());var n=e.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop||0;if(!(Math.abs(c-n)<=p)){u=n>c?1:-1,c=n;var a=o.showOptions.showValue||0==+o.showOptions.showValue?+o.showOptions.showValue:height/2-winH/2;i&&clearTimeout(i),console.log("scrollDir = "+u),console.log("scroll = "+(d.indexOf("scroll ")>=0)),console.log("scrollup = "+(d.indexOf("scrollup ")>=0)),console.log("breakpoint = "+a),i=setTimeout(function(){(d.indexOf("scroll ")>=0&&1==u&&r.utils.getScrollPercentage()>a||d.indexOf("scrollup ")>=0&&-1==u&&r.utils.getScrollPercentage()<a)&&(r.utils.removeEvent(e,"scroll",m),y(!1))},200)}}function g(t){var o=t.toElement||t.relatedTarget;!0===l&&console.log("mouseout: ",o+" "+t.clientY),null===o&&t.clientY<20&&"none"==n.css("display")&&(r.utils.removeEvent(e,"mouseout",g),y(!1))}}function y(e){if("none"!==n.css("display"))return!1;!0===e?(n.show(),o.appearance.pushPage&&w()):r.tracker.nanobar.isPassed(g.currentTemplate)||r.tracker.nanobar.isTemplatePassed(g.currentTemplate)||(r.tracker.nanobar.setViewed(g.currentTemplate),n.show(),o.appearance.pushPage&&w(),r.Popup.setUserData(g),r.Popup.sendUserData())}function w(){var e="large"===o.styling.size?60:38;a=parseInt(t("body").css("paddingTop")),(a=isNaN(a)?0:a)&&(e+=a),t("body").animate({paddingTop:e},200)}function v(e){if(n.addClass("picreel-nanobar-closed"),o.appearance.pushPage&&t("body").animate({paddingTop:a},200),1==e){var i=r.utils.getLocationPath();r.tracker.nanobar.setPassed(g.currentTemplate,f,i),r.tracker.nanobar.setTemplatePassed(g.currentTemplate,f),g.passedTemplates?g.passedTemplates+=","+g.currentTemplate:g.passedTemplates=g.currentTemplate}}function k(){var e=o.styling.addShadow?"picreel-nanobar-with-shadow ":"";i='<div class="picreel-nanobar picreel-nanobar-position-'+o.appearance.position+" "+e+"picreel-nanobar-attachment-"+o.appearance.attachment+" picreel-nanobar-size-"+o.styling.size+'" style="background-color:'+o.styling.bg+"; color: "+o.styling.textColor+"; border-bottom-color: "+o.styling.border+'"><div class="picreel-nanobar-content-wrapper">'+function(){var e='<div class="picreel-nanobar-content"><div class="picreel-nanobar-title" style="color:'+o.styling.textColor+';">'+o.data.text+"</div>";switch(o.type){case"redirect":e+=_();break;case"collect":switch(o.data.inputType){case"email":e+='<input type="email" class="picreel-nanobar-input" placeholder="'+o.data.emailPlaceholder+'">',e+=_();break;case"emailName":e+='<div class="picreel-nanobar-inputs-wrapper">',e+='<input type="text" class="picreel-nanobar-input" placeholder="'+o.data.namePlaceholder+'">',e+='<input type="email" class="picreel-nanobar-input" placeholder="'+o.data.emailPlaceholder+'">',e+="</div>",e+=_();break;case"phone":e+='<div class="picreel-nanobar-inputs-wrapper">',e+='<input type="tel" class="picreel-nanobar-input" placeholder="'+o.data.phonePlaceholder+'">',e+="</div>",e+=_();break;case"phoneName":e+='<div class="picreel-nanobar-inputs-wrapper">',e+='<input type="text" class="picreel-nanobar-input" placeholder="'+o.data.namePlaceholder+'">',e+='<input type="tel" class="picreel-nanobar-input" placeholder="'+o.data.phonePlaceholder+'">',e+="</div>",e+=_()}}return e+="</div>"}()+"</div>"+function(){var e="";o.appearance.closable&&(e='<div class="picreel-nanobar-close-button" style="color:'+o.styling.closeColor+'">&times;</div>');return e}()+"</div>"}function _(){var e=o.data.redirectUrl?' href="'+o.data.redirectUrl+'" ':"",t=' target="'+(o.data.redirectTarget?o.data.redirectTarget:"_blank")+'"',r='<a class="picreel-nanobar-button picreel-nanobar-button-style-button" style="background-color: '+o.styling.button.bg+"; color: "+o.styling.button.textColor+';" ';return"redirect"==o.type&&(r+=e+t),r+=">"+o.data.buttonText+"</a>"}function x(){void 0!==n&&n.remove()}return{init:b,reInit:function(e){x(),b(e)},initPreviewNB:function(r){t=e.picreel.jQuery||jQuery,void 0!==n&&x(),r&&(o=r),o.appearance.position="top",o.appearance.attachment="static",o.appearance.closable=!0,k(),(n=t(i)).hide().prependTo(".preview-container .preview"),t(document).trigger("nanobar_loaded"),y(!0)}}}()}(window),function(e){"use strict";if(e.picreel.gate)return!1;var t=e.picreel=e.picreel||{};t.gate=function(){if(!picreel.utils.cookies.getItem("picreel_block")){var r=t.tracker.getGetParameters(),o=setInterval(function(){/loaded|complete/.test(document.readyState)&&(picreel.utils.createEvent("picreel_loaded"),r.no_init||n(),clearInterval(o))},10);return{init:n,getTemplate:a,runReminderbar:s}}function i(e){if("hide"===e.cookie_status&&null!==picreel.utils.cookies.getItem(e.cookie_name)){var t=picreel.utils.cookies.getItem(e.cookie_name);t=parseFloat(t);if(""==e.cookie_value||"="==e.cookie_compare&&t==e.cookie_value||">"==e.cookie_compare&&t>e.cookie_value||"<"==e.cookie_compare&&t<e.cookie_value||">="==e.cookie_compare&&t>=e.cookie_value||"<="==e.cookie_compare&&t<=e.cookie_value)return!1}if("show"===e.cookie_status){if(null===picreel.utils.cookies.getItem(e.cookie_name))return!1;if(""!=e.cookie_value){t=picreel.utils.cookies.getItem(e.cookie_name);t=parseFloat(t);if("="==e.cookie_compare&&t!=e.cookie_value||">"==e.cookie_compare&&t<=e.cookie_value||"<"==e.cookie_compare&&t>=e.cookie_value||">="==e.cookie_compare&&t<e.cookie_value||"<="==e.cookie_compare&&t>e.cookie_value)return!1}}if("hide_like"===e.cookie_status&&null!==picreel.utils.cookies.getCookieByNamePart(e.cookie_name)){t=picreel.utils.cookies.getCookieByNamePart(e.cookie_name);if(console.log(t),""==e.cookie_value||"="==e.cookie_compare&&t==e.cookie_value||">"==e.cookie_compare&&t>e.cookie_value||"<"==e.cookie_compare&&t<e.cookie_value||">="==e.cookie_compare&&t>=e.cookie_value||"<="==e.cookie_compare&&t<=e.cookie_value)return!1}if("show_like"===e.cookie_status){if(null===picreel.utils.cookies.getCookieByNamePart(e.cookie_name))return!1;if(""!=e.cookie_value){t=picreel.utils.cookies.getCookieByNamePart(e.cookie_name);if(console.log(t),"="==e.cookie_compare&&t!=e.cookie_value||">"==e.cookie_compare&&t<=e.cookie_value||"<"==e.cookie_compare&&t>=e.cookie_value||">="==e.cookie_compare&&t<e.cookie_value||"<="==e.cookie_compare&&t>e.cookie_value)return!1}}return!0}function n(){var r=picreel.utils.getParameterByName("picreel_block");if(void 0!==r&&parseInt(r)>0&&t.tracker.blockPicreel(r),!picreel.utils.cookies.getItem("picreel_block"))if(t.tracker.addPageView(),location.href.indexOf("for-popup-link.com")>-1){var o=picreel.config.getUrls().s3+"js/picreel.no-iframe-api.min.js",n=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(n),n.onload=function(){console.log("picreel.no-iframe-api.js loaded")},n.async=!1,n.src=o;var l=picreel.config.getUrls().s3+"js/picreel.no-iframe-popup.min.js",p=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(p),p.onload=function(){var e=a(!0);t.CustomPopup.setUserData(e.userData),t.CustomPopup.render.appendPoweredLink(),picreel.utils.jsonp(e.iframe.src+"&custom_template=1","getResponseJSON",function(r){if(!1==!!r.template_passed){if(!1!=!!r.popup){var o=null,n=function(){if(a){clearInterval(o),picreel.utils.createEvent("picreel_popup_loaded"),e.iframe=document.createElement("div"),e.iframe.style.display="none",e.iframe.id="pcrl-frame-body",e.iframe.innerHTML=r.template,document.body.appendChild(e.iframe);var i=document.createElement("script");i.type="text/javascript",i.text=r.template_scripts,document.body.appendChild(i),e.picreel_tech_data=r.picreel_tech_data,e.event_stack=JSON.parse(r.event_stack),t.CustomPopup.init(e,r.popup)}},a=!0;!1!==r.popup.cookie?(a=i(r.popup.cookie),o=setInterval(function(){a=i(r.popup.cookie),n()},5e3),n()):n()}}else t.tracker.popup.setTemplatePassed(r.template_passed)})},p.async=!1,p.src=l}else picreel.utils.checkSupport("json",function(){var r,o;r=function(){var e;PCD.receiveMessage(function(r){if("ab_no_template"===r.message&&r.params){var o=JSON.parse(r.params);t.Popup.setCurrentTemplateId(o.a_template_id),t.Popup.render.addHiddingPopupCookies()}if("widgets_data"===r.message&&r.params){var n=JSON.parse(r.params);if(!1!=!!n.template_passed)return void t.tracker.popup.setTemplatePassed(n.template_passed);if(!1!=!!n.popup){console.log("remove_prev_reminderbar",n.popup.remove_prev_reminderbar),n.popup.remove_prev_reminderbar&&(t.tracker.popup.clearReminderbarCookies(0),t.reminderBar.destroyRB());var a=null,s=function(){if(l){clearInterval(a);try{e.iframe.contentWindow.postMessage("popupInitialized","*"),picreel.utils.createEvent("picreel_popup_loaded")}catch(e){}t.Popup.init(e,n.popup)}},l=!0;!1!==n.popup.cookie?(l=i(n.popup.cookie),a=setInterval(function(){l=i(n.popup.cookie),s()},5e3),s()):s()}!1!=!!n.survey&&picreel.utils.checkSupport("jquery",function(){var e=null,r=function(){o&&(clearInterval(e),t.Poll.init(n.survey))},o=!0;!1!==n.survey.cookie?(o=i(n.survey.cookie),e=setInterval(function(){o=i(n.survey.cookie),r()},5e3),r()):r()}),!1!=!!n.nanobar&&picreel.utils.checkSupport("jquery",function(){var e=null,r=function(){o&&(clearInterval(e),t.nanoBar.init(n.nanobar))},o=!0;!1!==n.nanobar.showOptions.cookie?(o=i(n.nanobar.showOptions.cookie),e=setInterval(function(){o=i(n.nanobar.showOptions.cookie),r()},5e3),r()):r()}),!1!=!!n.reminderbar&&(picreel.tracker.popup.setReminderbarId(n.reminderbar.id),picreel.tracker.setIsMobile(n.reminderbar.popup_template_id,n.reminderbar.isMobile),picreel.tracker.popup.connectPopupTemplateIdRB(n.reminderbar.popup_template_id),picreel.tracker.popup.setReminderbarIsTrigger(n.reminderbar.popup_template_id,n.reminderbar.appearance.isTrigger),picreel.tracker.popup.setRBSettingsToCookie(n.reminderbar))}}),e=a(),t.Popup.setUserData(e.userData),t.Popup.render.appendPoweredLink();var r=picreel.tracker.popup.getConnectedPopupTemplateIdRB();picreel.tracker.popup.isReminderbarPassed(picreel.tracker.popup.getReminderbarId())||!picreel.tracker.popup.isTemplatePassed(r)&&!picreel.tracker.popup.isOnlyReminderbarTrigger(r)||s(picreel.tracker.setIsMobile(r))},o=t.config.getUrls(),void 0===e.PCD?picreel.utils.loadScript(o.messenger,function(){r&&r()}):r&&r()})}function a(e){var o,i={userData:t.tracker.getUserData(),iframe:document.createElement("iframe")},n=t.config.getUrls();return function(){var e=[];for(var a in o={source_url:i.userData.sourceUrl,source_host:i.userData.sourceHost,templateId:i.userData.passedTemplates,userAgent:i.userData.userAgent,referrer:i.userData.referrer,screenWight:i.userData.screenWidth,screenHeight:i.userData.screenHeight,pv:t.tracker.popup.getViewedCookie(),pp:t.tracker.popup.getPassedCookie(),sv:t.tracker.poll.getViewedCookie(),sp:t.tracker.poll.getPassedCookie(),nv:t.tracker.nanobar.getViewedCookie(),np:t.tracker.nanobar.getPassedTemplates(),rb:t.tracker.popup.getReminderbarId(),ret:i.userData.isReturning?"1":""},r.campaign_id&&(o.campaignId=r.campaign_id),o)e.push(a+"="+encodeURIComponent(o[a]));i.iframe.src=n.sourceUrl+"?"+e.join("&"),picreel.tracker.popup.isReminderbarPassed(picreel.tracker.popup.getReminderbarId())&&(i.iframe.src+="&rp=1",picreel.tracker.popup.clearReminderbarCookies(picreel.tracker.popup.getReminderbarId())),t.tracker.isPicreelBlocked()&&(i.iframe.src+="&picreel_block=1"),t.tracker.isVisitedCookie()||(i.iframe.src+="&visited=1"),i.iframe.src+="&utm_source=Picreel&utm_medium=display&utm_campaign=Picreel";var s=t.tracker.getPrlGetParametersUrl();""!==s?(t.tracker.setPrlGetParametersCookie(s),i.iframe.src+=s):null!==(s=t.tracker.getPrlGetParametersCookie())&&""!==s&&(i.iframe.src+=s),t.tracker.setVisited()}(),e||(i.iframe.className="picreel-element",i.iframe.id="picreel-frame",i.iframe.style.display="none",document.body.appendChild(i.iframe)),i}function s(e){console.log("runReminderbar: runReminderbar"),console.log("runReminderbar: isReminderbarSetted",picreel.tracker.popup.isReminderbarSetted()),picreel.tracker.popup.isReminderbarSetted()&&picreel.utils.checkSupport("jquery",function(){var t=picreel.tracker.popup.getRBSettingsFromCookie(),r=picreel.tracker.popup.getReminderbarTypeToShow(picreel.tracker.popup.getReminderbarId());console.log("runReminderbar: nbSettings",t),console.log("runReminderbar: nbTypeToShow",r),(e||1==r&&1==t.appearance.isTrigger||1==r&&"coupon"!=t.type||0==r&&"coupon"==t.type)&&picreel.reminderBar.reInit(t)})}}()}(window);